{"id":"j-00h","title":"Conversations should be persisted","description":"This is still not working","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T11:13:21.347543+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:10:52.375586+01:00","closed_at":"2026-01-17T13:10:52.375586+01:00","close_reason":"Fixed conversation persistence by using Automerge's native insertAt/deleteAt methods and fixing a circular dependency infinite loop in LLMSection's onSubmitButtonProps callback","comments":[{"id":20,"issue_id":"j-00h","author":"Herb Caudill","text":"This should not have been closed. If I make a journal entry and have a conversation then reload, only my original entry is persisted. The LLM responses and my subsequent message should all be persisted.","created_at":"2026-01-17T10:29:14Z"}]}
{"id":"j-03u","title":"Style 'Ask Claude' button like Claude chat: orange with up arrow","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:10:46.094502+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:16:04.058552+01:00","closed_at":"2026-01-17T00:16:04.058552+01:00","close_reason":"Closed"}
{"id":"j-0j1","title":"Security: Implement proper token revocation on logout","description":"Implement proper token revocation by calling Google's revocation endpoint when the user signs out.\n\n**Context:** Currently logout just clears localStorage. The tokens remain valid on Google's side until they expire, which is a security risk.\n\n**Implementation:**\n1. Add a revokeTokens() function that calls Google's revocation endpoint: https://oauth2.googleapis.com/revoke\n2. Update signOut() in useGoogleCalendar to call revokeTokens() before clearing local storage\n3. Handle revocation failures gracefully (still clear local storage even if revocation fails)\n\n**Acceptance Criteria:**\n- Logout calls Google's token revocation endpoint\n- Revocation failures are handled gracefully\n- Unit tests cover revocation success and failure scenarios\n\n**Blocked by:** j-cvy","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T15:41:50.702466+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:41:50.702466+01:00"}
{"id":"j-0pm","title":"Location: remove badge styling, match date text size","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:05:22.661837+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:35:24.152613+01:00","closed_at":"2026-01-17T08:35:24.152613+01:00","close_reason":"Closed"}
{"id":"j-0vi","title":"Bug: Missing window object check for SSR compatibility","description":"**File:** src/lib/google-calendar.ts:10\n\n**Issue:** Code assumes `window` object exists. This will fail in Node.js/SSR environments.\n\n```typescript\nconst GOOGLE_REDIRECT_URI =\n  import.meta.env.VITE_GOOGLE_REDIRECT_URI ?? \\`\\${window.location.origin}/oauth/callback\\`\n```\n\n**Impact:** SSR or server-side execution will crash.\n\n**Fix:**\n```typescript\nconst GOOGLE_REDIRECT_URI =\n  import.meta.env.VITE_GOOGLE_REDIRECT_URI ?? \n  (typeof window !== 'undefined' ? \\`\\${window.location.origin}/oauth/callback\\` : '')\n```","status":"open","priority":3,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:54:15.748522+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:54:15.748522+01:00"}
{"id":"j-13d","title":"E2E tests: Entry editing and persistence","description":"Add E2E tests for entry editing workflows including:\n- Creating new journal entries  \n- Editing existing entries\n- Verifying content persistence across page navigation\n- Auto-save behavior\n\nPart of j-8ku E2E test coverage improvement.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:05:22.031492+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:48:37.198665+01:00","closed_at":"2026-01-17T01:48:37.198665+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-13d","depends_on_id":"j-8ku","type":"blocks","created_at":"2026-01-17T00:05:22.032349+01:00","created_by":"Herb Caudill"}]}
{"id":"j-1br","title":"Auto-focus next input in conversation","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T08:10:26.039794+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:00:29.518216+01:00","closed_at":"2026-01-17T09:00:29.518216+01:00","close_reason":"Closed"}
{"id":"j-1db","title":"Duplicate icon components across files","description":"**Files:** Header.tsx, Footer.tsx, DatePicker.tsx, CalendarEvents.tsx, DayView.tsx, SettingsView.tsx\n\n**Issue:** Inline SVG icon definitions are duplicated throughout components instead of using a centralized icon library. Same icons (chevron, settings, calendar) are defined multiple times.\n\n**Examples:**\n- ChevronLeftIcon defined in Header.tsx (line 192) AND DatePicker.tsx (line 233)\n- CalendarIcon defined in Header.tsx (line 228) AND DatePicker.tsx\n\n**Impact:**\n- Code duplication\n- Inconsistent icon styling possible\n- Harder to maintain\n\n**Fix:**\n1. Create a shared `icons.tsx` file\n2. Or use Tabler icons package (per CLAUDE.md preferences)\n3. Remove inline SVG definitions","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:53.690837+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:53.690837+01:00"}
{"id":"j-1jb","title":"this is a test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-17T09:23:01.259681+01:00","updated_at":"2026-01-17T09:34:47.274579+01:00","deleted_at":"2026-01-17T09:34:47.274579+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"j-1ju","title":"Bug: Circular dependencies in hook useEffect arrays","description":"**Files:** \n- src/hooks/useReverseGeocode.ts:100-106\n- src/hooks/useGoogleCalendar.ts:193-240\n\n**Issue 1 (useReverseGeocode):** `fetchLocality` is included in the dependency array of the effect, but `fetchLocality` itself depends on `latitude` and `longitude`. This creates a circular dependency where every coordinate change triggers fetchLocality to be recreated, which re-triggers the effect.\n\n**Issue 2 (useGoogleCalendar):** The `fetchEvents` callback includes `events` in its dependency array (line 239), but `events` is state that changes every time `fetchEvents` is called. This creates excessive callback recreation and potential stale data issues.\n\n**Impact:**\n- Unnecessary re-renders\n- Potential race conditions if rapid state changes occur\n- Memory overhead from recreating callbacks frequently\n\n**Fix:** \n1. Remove `fetchLocality` from useEffect dependencies, inline the logic\n2. Remove `events` from fetchEvents dependencies, use a ref instead","status":"open","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:12.788561+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:12.788561+01:00"}
{"id":"j-1ou","title":"Remove placeholder text from text box","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T00:11:12.786508+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:19:34.001489+01:00","closed_at":"2026-01-17T00:19:34.001489+01:00","close_reason":"Closed"}
{"id":"j-1ze","title":"Remove 'Ask Claude' text","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:49:56.875907+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:01:03.412856+01:00","closed_at":"2026-01-17T01:01:03.412856+01:00","close_reason":"Closed"}
{"id":"j-242","title":"Conversations are still not being persisted","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T12:08:53.658178+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T12:14:30.283671+01:00","closed_at":"2026-01-17T12:14:30.283671+01:00","close_reason":"Investigation found no actual bug. All persistence tests pass, and the code logic is correct. Recent commits (db92383, 9891671) fixed conversation persistence issues. This issue appears to be stale. If the issue reproduces, please reopen with specific reproduction steps."}
{"id":"j-2a8","title":"Create LLM provider abstraction layer (interface)","description":"Create src/lib/llm/types.ts with provider abstraction interfaces:\\n- LLMProvider interface with sendMessage method\\n- LLMConfig interface for provider-agnostic configuration\\n- LLMResponse interface (same as current ClaudeResponse)\\n- ProviderType enum for supported providers\\n\\nThis establishes the foundation for supporting multiple LLM providers (Claude, OpenAI, etc.)","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:22:55.074945+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:32:39.675178+01:00","closed_at":"2026-01-17T00:32:39.675178+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-2a8","depends_on_id":"j-90w","type":"relates-to","created_at":"2026-01-17T00:23:50.695446+01:00","created_by":"Herb Caudill"}]}
{"id":"j-2ay","title":"API key stored in plain text in localStorage","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:45.04761+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:44:52.630936+01:00","closed_at":"2026-01-16T23:44:52.630936+01:00","close_reason":"Closed","comments":[{"id":4,"issue_id":"j-2ay","author":"Herb Caudill","text":"The Claude API key is stored directly in localStorage via Automerge. This is visible to any JavaScript running on the page (including potential XSS attacks) and persists across sessions.\n\n**Location:** src/types/journal.ts (Settings.claudeApiKey) and src/context/JournalContext.tsx\n\n**Considerations:**\n- The API key is stored unencrypted in IndexedDB (via Automerge)\n- Any script with access to localStorage can read it\n- This is a common pattern for client-side apps, but users should be warned about the security implications\n\n**Potential fixes:**\n1. Add a warning in the settings UI about API key security\n2. Consider using a backend proxy to make API calls (more secure but more complex)\n3. At minimum, mask the API key in the UI after it's saved","created_at":"2026-01-16T22:20:51Z"}]}
{"id":"j-2gi","title":"Add a hotkey: `p` and `n` should navigate to the previous and next day (when not in a text input)","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T10:59:56.405539+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T12:00:35.681906+01:00","closed_at":"2026-01-17T12:00:35.681906+01:00","close_reason":"Closed"}
{"id":"j-2ml","title":"Once I've entered the journal post and gotten a response from claude, don't display the input any more - show it as a conversation element","description":"I'm not sure how you're storing this stuff internally, but conceptually the journal post should just be treated as the first entry in a chat - there's nothing special about it. From a quick look at the code it seems like the journal post and the subsequent conversation are being treated like two different things, so that probably needs to be refactored. \n","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T10:12:49.756566+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T11:03:06.426049+01:00","closed_at":"2026-01-17T11:03:06.426049+01:00","close_reason":"Fixed: added local state to track conversation start immediately, fixed Automerge array mutation to persist messages","comments":[{"id":19,"issue_id":"j-2ml","author":"Herb Caudill","text":"The original fix was incomplete - EntryEditor wasn't hiding due to Automerge state timing issues","created_at":"2026-01-17T10:02:59Z"}]}
{"id":"j-2ml.1","title":"Show user messages in conversation view after LLM response","description":"In LLMSection, display user messages (not just assistant messages) in the conversation view. This includes both the initial journal entry and follow-up messages. Each user message should be styled as a distinct conversation element (different from assistant messages).","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T10:32:37.028847+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T10:36:14.125342+01:00","closed_at":"2026-01-17T10:36:14.125342+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-2ml.1","depends_on_id":"j-2ml","type":"parent-child","created_at":"2026-01-17T10:32:37.032593+01:00","created_by":"Herb Caudill"}]}
{"id":"j-2ml.2","title":"Hide EntryEditor textarea after conversation starts","description":"Once the user has submitted their journal entry and received an LLM response, hide the EntryEditor textarea since the entry is now displayed as a conversation element. The EntryEditor should only be visible when there's no conversation yet (no assistant messages).","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T10:32:43.655839+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T10:38:43.403972+01:00","closed_at":"2026-01-17T10:38:43.403972+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-2ml.2","depends_on_id":"j-2ml","type":"parent-child","created_at":"2026-01-17T10:32:43.659089+01:00","created_by":"Herb Caudill"}]}
{"id":"j-2ml.3","title":"Add edit mode to return to original journal entry editing","description":"After the conversation has started and the EntryEditor is hidden, provide a way for users to edit their original journal entry. This could be an 'Edit' button/icon that toggles back to showing the textarea. Consider UX implications of editing after AI has already responded.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T10:32:50.241219+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T10:41:54.61226+01:00","closed_at":"2026-01-17T10:41:54.61226+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-2ml.3","depends_on_id":"j-2ml","type":"parent-child","created_at":"2026-01-17T10:32:50.244495+01:00","created_by":"Herb Caudill"}]}
{"id":"j-2ou","title":"Header layout: day/date on left, back/calendar/forward in center, settings on right","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T22:35:26.662138+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:51:59.58212+01:00","closed_at":"2026-01-16T23:51:59.58212+01:00","close_reason":"Closed"}
{"id":"j-2s0","title":"Performance: JournalContext value not memoized","description":"**File:** src/context/JournalContext.tsx:70-75\n\n**Issue:** The JournalContextValue object is recreated on every render in JournalDocumentProvider, causing all consumers to re-render unnecessarily.\n\n```typescript\nconst value: JournalContextValue = {\n  doc,\n  changeDoc,\n  handle,\n  isLoading: isUrlLoading || doc === undefined,\n}\n```\n\n**Impact:** Children consuming `useJournal()` will re-render even when the context values haven't changed, causing performance degradation.\n\n**Fix:** Wrap the value object in `useMemo()`:\n```typescript\nconst value = useMemo(() =\u003e ({\n  doc,\n  changeDoc,\n  handle,\n  isLoading: isUrlLoading || doc === undefined,\n}), [doc, changeDoc, handle, isUrlLoading])\n```","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:51:36.22286+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:44:38.792658+01:00","closed_at":"2026-01-17T15:44:38.792658+01:00","close_reason":"Closed","comments":[{"id":32,"issue_id":"j-2s0","author":"Herb Caudill","text":"## Summary\n\nFixed the performance issue by memoizing the JournalContextValue object in `JournalDocumentProvider`.\n\n### Changes Made\n\n- Added `useMemo` import to `src/context/JournalContext.tsx`\n- Wrapped the context value object in `useMemo()` with dependencies `[doc, changeDoc, handle, isUrlLoading]`\n\n### Impact\n\nThis change prevents all context consumers from re-rendering unnecessarily when the parent component re-renders, since the context value object reference will now remain stable when its underlying values haven't changed.","created_at":"2026-01-17T14:44:35Z"}]}
{"id":"j-2tc","title":"as soon as I've submitted a conversation turn, the input should disappear and I should only see the read-only version of my input","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T11:03:53.430931+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T11:10:12.841185+01:00","closed_at":"2026-01-17T11:10:12.841185+01:00","close_reason":"Closed"}
{"id":"j-2v8","title":"Header: Move calendar icon to left of date and match location icon size","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:48:30.775562+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:20:34.401816+01:00","closed_at":"2026-01-17T09:20:34.401816+01:00","close_reason":"Closed"}
{"id":"j-31p","title":"UX: Future dates in DatePicker have no explanation","description":"**File:** src/components/DatePicker.tsx:193-205\n\n**Issue:** Future dates are disabled (grayed out) but there's no tooltip or explanation for why users can't select them.\n\n**Impact:** Users may not understand why future dates are unselectable, leading to confusion.\n\n**Fix:** Add a title attribute explaining the limitation:\n```typescript\n\u003cbutton\n  title={isFutureDate ? \"Cannot select future dates\" : undefined}\n  disabled={isFutureDate}\n  // ...\n\u003e\n```","status":"open","priority":4,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:54:18.070399+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:54:18.070399+01:00"}
{"id":"j-36x","title":"Hide calendar section when Google Calendar not configured","description":"This is still not working\n","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T09:06:29.761035+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:31:44.044356+01:00","closed_at":"2026-01-17T13:31:44.044356+01:00","close_reason":"Closed","comments":[{"id":21,"issue_id":"j-36x","author":"Herb Caudill","text":"test comment","created_at":"2026-01-17T11:44:43Z"},{"id":25,"issue_id":"j-36x","author":"Herb Caudill","text":"Changed CalendarEvents component to only render when user is fully authenticated with Google Calendar. Previously showed 'Connect Google Calendar' UI for unauthenticated users; now returns null for all non-authenticated states (unconfigured, unauthenticated, authenticating). Removed dead code paths including AuthButton component and unauthenticated branch in EventsList. Updated tests accordingly.","created_at":"2026-01-17T12:31:38Z"}]}
{"id":"j-39q","title":"Add API key format validation","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:11.266377+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:40:38.007069+01:00","closed_at":"2026-01-17T01:40:38.007069+01:00","close_reason":"Closed","comments":[{"id":11,"issue_id":"j-39q","author":"Herb Caudill","text":"The API key input accepts any text without validation. Anthropic API keys have a specific format (sk-ant-*) that could be validated before saving.\n\n**Location:** src/components/SettingsView.tsx\n\n**Fix:** Add validation to check that the API key:\n1. Starts with 'sk-ant-'\n2. Has a reasonable length\n3. Show an error message for invalid format","created_at":"2026-01-16T22:21:38Z"}]}
{"id":"j-3n9","title":"remove all `console.log` calls from tests","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:10:20.725942+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:17:05.679808+01:00","closed_at":"2026-01-17T13:17:05.679808+01:00","close_reason":"Closed","comments":[{"id":22,"issue_id":"j-3n9","author":"Herb Caudill","text":"Removed all debug console.log statements from e2e/conversation-persistence.spec.ts:\n- Removed browser console logging setup (page.on 'console' listener)\n- Removed debug logging for DOM content verification after reload\n- Tests now run without emitting debug output","created_at":"2026-01-17T12:17:01Z"}]}
{"id":"j-3q0","title":"Hide ChatGPT UI until functionality is wired up","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T09:04:02.714018+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T10:49:22.050891+01:00","closed_at":"2026-01-17T10:49:22.050891+01:00","close_reason":"Closed"}
{"id":"j-3ru","title":"When running playwright tests, I see a lot of this:","description":"[Browser] Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render.","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:05:24.749548+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:14:50.671061+01:00","closed_at":"2026-01-17T13:14:50.671063+01:00"}
{"id":"j-3xl","title":"Phase 2: Core UI","status":"closed","priority":1,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:13.48438+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.765327+01:00","closed_at":"2026-01-16T21:03:57.538061+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-3xl","depends_on_id":"j-zw7","type":"blocks","created_at":"2026-01-16T20:29:52.230999+01:00","created_by":"Herb Caudill"}]}
{"id":"j-3xl.1","title":"Create lib/dates.ts","description":"Date utilities: formatDate, parseDate, getToday, addDays","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:58.280837+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.764012+01:00","closed_at":"2026-01-16T20:53:20.042177+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-3xl.1","depends_on_id":"j-3xl","type":"parent-child","created_at":"2026-01-16T20:28:58.283142+01:00","created_by":"Herb Caudill"}]}
{"id":"j-3xl.2","title":"Create components/EntryEditor.tsx","description":"Textarea with debounced auto-save to Automerge","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:59.456745+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.763773+01:00","closed_at":"2026-01-16T20:56:14.57078+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-3xl.2","depends_on_id":"j-3xl","type":"parent-child","created_at":"2026-01-16T20:28:59.458497+01:00","created_by":"Herb Caudill"}]}
{"id":"j-3xl.3","title":"Create components/DayView.tsx","description":"Main screen showing entry for current date","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:00.397299+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.763501+01:00","closed_at":"2026-01-16T20:58:20.010455+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-3xl.3","depends_on_id":"j-3xl","type":"parent-child","created_at":"2026-01-16T20:29:00.39981+01:00","created_by":"Herb Caudill"}]}
{"id":"j-3xl.4","title":"Create components/Header.tsx","description":"Date display and settings link","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:01.529058+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.763242+01:00","closed_at":"2026-01-16T21:00:03.646262+01:00","close_reason":"Created Header.tsx with date display and settings link","dependencies":[{"issue_id":"j-3xl.4","depends_on_id":"j-3xl","type":"parent-child","created_at":"2026-01-16T20:29:01.531058+01:00","created_by":"Herb Caudill"}]}
{"id":"j-3xl.5","title":"Update App.tsx with hash routing","description":"Hash-based routing: /#/day/YYYY-MM-DD and /#/settings","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:02.881531+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.762773+01:00","closed_at":"2026-01-16T21:03:39.342995+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-3xl.5","depends_on_id":"j-3xl","type":"parent-child","created_at":"2026-01-16T20:29:02.88431+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4ca","title":"Geocoding cache grows unbounded in memory","status":"closed","priority":3,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:09.331174+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:30:03.496247+01:00","closed_at":"2026-01-17T00:30:03.496247+01:00","close_reason":"Closed","comments":[{"id":10,"issue_id":"j-4ca","author":"Herb Caudill","text":"The geocoding cache in geocoding.ts uses a Map that grows as new coordinates are looked up. Expired entries are only removed when they're accessed (lazy cleanup), not proactively.\n\n**Location:** src/lib/geocoding.ts (cache Map)\n\n**Impact:** For a long-running session where the user browses many different days with different locations, the cache could accumulate many entries.\n\n**Fix options:**\n1. Add a maximum cache size with LRU eviction\n2. Periodically clean up expired entries\n3. Clear cache on app restart (it's in-memory, so this happens naturally)","created_at":"2026-01-16T22:21:35Z"}]}
{"id":"j-4fm","title":"Prevent navigation to future dates","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T09:05:53.270344+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T12:39:45.548759+01:00","closed_at":"2026-01-17T12:39:45.548761+01:00","close_reason":"Closed"}
{"id":"j-4o4","title":"Rearrange header: day of week centered, nav arrows on sides, settings to footer","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T08:07:26.546754+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:52:23.299628+01:00","closed_at":"2026-01-17T08:52:23.299628+01:00","close_reason":"All sub-issues completed: Footer component created with settings link, Header reorganized with centered day/date and nav arrows on sides, Footer integrated into App layout, and Header tests updated."}
{"id":"j-4o4.1","title":"Create Footer component with settings link","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:37:13.218901+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:40:46.88438+01:00","closed_at":"2026-01-17T08:40:46.88438+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-4o4.1","depends_on_id":"j-4o4","type":"parent-child","created_at":"2026-01-17T08:37:13.219521+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4o4.2","title":"Reorganize Header: center day of week, move nav arrows to sides, remove settings","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:37:18.161363+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:46:11.884923+01:00","closed_at":"2026-01-17T08:46:11.884923+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-4o4.2","depends_on_id":"j-4o4","type":"parent-child","created_at":"2026-01-17T08:37:18.165014+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4o4.3","title":"Integrate Footer into App layout","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:37:21.56136+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:50:10.902023+01:00","closed_at":"2026-01-17T08:50:10.902023+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-4o4.3","depends_on_id":"j-4o4","type":"parent-child","created_at":"2026-01-17T08:37:21.563731+01:00","created_by":"Herb Caudill"},{"issue_id":"j-4o4.3","depends_on_id":"j-4o4.1","type":"blocks","created_at":"2026-01-17T08:37:39.36308+01:00","created_by":"Herb Caudill"},{"issue_id":"j-4o4.3","depends_on_id":"j-4o4.2","type":"blocks","created_at":"2026-01-17T08:37:39.411424+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4o4.4","title":"Update Header tests for new layout","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:37:25.154616+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:52:15.295225+01:00","closed_at":"2026-01-17T08:52:15.295225+01:00","close_reason":"Header tests were already updated as part of j-4o4.2 (commit 9d3b91f). All 17 Header tests pass and cover: navigation controls layout (arrows on sides), centered date/day display, calendar button, date picker, and location badge.","dependencies":[{"issue_id":"j-4o4.4","depends_on_id":"j-4o4","type":"parent-child","created_at":"2026-01-17T08:37:25.158392+01:00","created_by":"Herb Caudill"},{"issue_id":"j-4o4.4","depends_on_id":"j-4o4.2","type":"blocks","created_at":"2026-01-17T08:37:33.898509+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4og","title":"Each day should have its own conversation (not shared)","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:11:00.230195+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:17:06.320508+01:00","closed_at":"2026-01-17T08:17:06.320508+01:00","close_reason":"Closed"}
{"id":"j-4q8","title":"Testing: No unit tests for LLMSection component","description":"**File:** src/components/LLMSection.tsx\n\n**Issue:** LLMSection is heavily mocked in DayView.test.tsx (lines 18-66) but has NO unit tests of its own. The mock is 200+ lines and doesn't match real behavior.\n\n**Missing Test Coverage:**\n- Message input/submission flow\n- Streaming response handling\n- Error boundary behavior\n- Conversation persistence callbacks\n- Message formatting and display\n- Provider type switching (Claude vs OpenAI)\n- Token counting UI\n- API key validation in real component context\n\n**Impact:** \n- Real component behavior may diverge from tests without detection\n- Bugs in LLMSection won't be caught by CI\n- The complex mock suggests high component complexity that needs testing\n\n**Fix:** Create `LLMSection.test.tsx` with comprehensive tests for all functionality.","status":"open","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:12.090763+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:12.090763+01:00"}
{"id":"j-4w8","title":"Use shadcn input group for journal input and chat input","description":"Replace current input styling with shadcn input group component. See https://ui.shadcn.com/docs/components/input-group","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T08:53:01.203054+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:39:39.915819+01:00","closed_at":"2026-01-17T09:39:39.915819+01:00","close_reason":"Closed"}
{"id":"j-4w8.1","title":"Install shadcn input-group component","description":"Install the shadcn input-group component using pnpm dlx shadcn@latest add input-group","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T09:29:20.998389+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:32:13.651385+01:00","closed_at":"2026-01-17T09:32:13.651385+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-4w8.1","depends_on_id":"j-4w8","type":"parent-child","created_at":"2026-01-17T09:29:21.002077+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4w8.2","title":"Refactor EntryEditor to use InputGroupTextarea","description":"Replace the plain textarea in EntryEditor.tsx with InputGroupTextarea and InputGroupAddon for the save status indicator. Use block-end alignment for the addon.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T09:29:22.061604+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:34:52.476571+01:00","closed_at":"2026-01-17T09:34:52.476571+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-4w8.2","depends_on_id":"j-4w8","type":"parent-child","created_at":"2026-01-17T09:29:22.062212+01:00","created_by":"Herb Caudill"},{"issue_id":"j-4w8.2","depends_on_id":"j-4w8.1","type":"blocks","created_at":"2026-01-17T09:29:31.056558+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4w8.3","title":"Refactor LLMSection to use InputGroup components","description":"Replace the inputs in LLMSection.tsx with InputGroup components:\n1. Refactor the submit button area to use InputGroup with buttons as addons\n2. Refactor the follow-up textarea to use InputGroupTextarea with the send button as a block-end addon\nUse appropriate alignments per shadcn documentation.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T09:29:23.574169+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:38:06.889517+01:00","closed_at":"2026-01-17T09:38:06.889517+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-4w8.3","depends_on_id":"j-4w8","type":"parent-child","created_at":"2026-01-17T09:29:23.577524+01:00","created_by":"Herb Caudill"},{"issue_id":"j-4w8.3","depends_on_id":"j-4w8.1","type":"blocks","created_at":"2026-01-17T09:29:31.109159+01:00","created_by":"Herb Caudill"}]}
{"id":"j-4w8.4","title":"Update tests for shadcn input-group migration","description":"Ensure all existing tests in EntryEditor.test.tsx, LLMSection.test.tsx, and related e2e tests still pass after the input-group migration. Update selectors if needed.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T09:29:24.392883+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:39:31.8168+01:00","closed_at":"2026-01-17T09:39:31.8168+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-4w8.4","depends_on_id":"j-4w8","type":"parent-child","created_at":"2026-01-17T09:29:24.393496+01:00","created_by":"Herb Caudill"},{"issue_id":"j-4w8.4","depends_on_id":"j-4w8.2","type":"blocks","created_at":"2026-01-17T09:29:31.16128+01:00","created_by":"Herb Caudill"},{"issue_id":"j-4w8.4","depends_on_id":"j-4w8.3","type":"blocks","created_at":"2026-01-17T09:29:31.215152+01:00","created_by":"Herb Caudill"}]}
{"id":"j-51x","title":"Update Settings to support LLM provider selection","description":"Extend the Settings interface and SettingsView component:\\n- Add llmProvider field to Settings type (default: 'claude')\\n- Add provider selection dropdown to SettingsView\\n- Rename claudeApiKey to a more generic name or keep provider-specific keys\\n- Update JournalContext to expose provider configuration","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:23:18.335765+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:47:20.125956+01:00","closed_at":"2026-01-17T00:47:20.125956+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-51x","depends_on_id":"j-bhg","type":"blocks","created_at":"2026-01-17T00:23:45.400631+01:00","created_by":"Herb Caudill"},{"issue_id":"j-51x","depends_on_id":"j-90w","type":"relates-to","created_at":"2026-01-17T00:23:50.847765+01:00","created_by":"Herb Caudill"}]}
{"id":"j-56b","title":"The submit button in the input group should always be on the right, and the status message on the left","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T10:07:39.793342+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T11:57:49.650387+01:00","closed_at":"2026-01-17T11:57:49.650387+01:00","close_reason":"Closed"}
{"id":"j-5gt","title":"Remove 'Ask a follow-up question' placeholder","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:53:23.213658+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:44:16.565446+01:00","closed_at":"2026-01-17T09:44:16.565446+01:00","close_reason":"Closed"}
{"id":"j-5xz","title":"i18n: Hardcoded weekday and date formatting","description":"**Files:**\n- src/components/DatePicker.tsx:148\n- src/components/Header.tsx:22-27, 33-50\n\n**Issue:** Hardcoded English weekday abbreviations and date formatting without localization support.\n\n```typescript\nconst weekDays = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"]\n```\n\n**Impact:**\n- Non-English speaking users see English abbreviations\n- Date formats may be confusing for non-US users\n\n**Fix:**\n1. Use `Intl.DateTimeFormat` for proper localization\n2. Consider adding locale preference in settings\n3. Example:\n```typescript\nconst weekDays = Array.from({ length: 7 }, (_, i) =\u003e\n  new Intl.DateTimeFormat('default', { weekday: 'short' })\n    .format(new Date(2024, 0, i + 7))  // Sunday = Jan 7, 2024\n)\n```","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:53:36.311377+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:53:36.311377+01:00"}
{"id":"j-60v","title":"In the settings dialog, autosave all the inputs \u0026 get rid of the save buttons","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:31:20.535253+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:43:42.682143+01:00","closed_at":"2026-01-17T13:43:42.682143+01:00","close_reason":"Closed","comments":[{"id":26,"issue_id":"j-60v","author":"Herb Caudill","text":"## Changes Made\n\nImplemented autosave for all settings fields, removing the need for explicit Save buttons.\n\n### Key Changes:\n\n1. **SettingsView.tsx**:\n   - Added debounced autosave (500ms delay) for all text inputs:\n     - Bio textarea\n     - Additional Instructions textarea\n     - Claude API key input\n   - Removed Save buttons from all fields\n   - Added individual save status indicators (\"Saving...\", \"Saved\") for each field\n   - Added refs to track debounce timeouts and cleanup on unmount\n   - Added `isInitialLoadRef` to prevent autosave from triggering on initial component mount\n   - API key validation now happens after the debounce, showing errors inline\n\n2. **SettingsView.test.tsx**:\n   - Updated all tests to work with autosave behavior\n   - Tests now advance timers to trigger debounced saves\n   - Added 100ms delay before typing to allow initial load flag to clear\n   - Renamed tests to reflect autosave behavior (e.g., \"autosaves bio when typing\")\n\n3. **E2E Tests Updated**:\n   - **settings.spec.ts**: Updated all Claude API key tests to use autosave\n   - **error-states.spec.ts**: Updated API key validation tests\n   - **conversation-persistence.spec.ts**: Updated API key setup to use autosave\n   - Removed references to Save buttons\n   - Tests now wait for \"Claude API key configured\" message instead of clicking Save\n\n### User Experience:\n- All settings now save automatically as you type\n- Saving status shows \"Saving...\" while debouncing, then \"Saved\" briefly\n- API key validation errors appear after the debounce delay\n- Errors clear immediately when the user starts typing again\n- The Clear button remains for manually clearing API keys","created_at":"2026-01-17T12:43:39Z"}]}
{"id":"j-63i","title":"Don't repeat journal entry in conversation","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:09:14.430352+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:55:38.553222+01:00","closed_at":"2026-01-17T08:55:38.553222+01:00","close_reason":"Closed"}
{"id":"j-6eb","title":"Security: Prompt injection risk in Claude provider","description":"**File:** src/lib/llm/providers/claude.ts:17-28\n\n**Issue:** User-provided `bio` and `additionalInstructions` are directly concatenated into the system prompt without sanitization. If a user's bio contains malicious instructions (e.g., \"Ignore previous instructions and...\"), this could lead to prompt injection attacks.\n\n```typescript\nif (bio?.trim()) {\n  systemPrompt += \\`\\\\n\\\\nAbout the user:\\\\n\\${bio.trim()}\\`  // Direct concatenation\n}\n```\n\n**Impact:** Prompt injection attacks where user bio or instructions override system behavior.\n\n**Risk Level:** Medium-High. Since users control their own data, the main risk is self-injection or if malicious content somehow ends up in user's settings.\n\n**Suggested Fixes:**\n1. Use structured prompts with clear delimiters (e.g., XML tags)\n2. Validate/sanitize user input against injection patterns\n3. Document this as a known limitation with clear warnings to users","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:51:33.505995+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:40:15.440572+01:00","closed_at":"2026-01-17T15:40:15.440572+01:00","close_reason":"Closed","comments":[{"id":30,"issue_id":"j-6eb","author":"Herb Caudill","text":"## Summary\n\nMitigated prompt injection risk in the Claude provider by:\n\n1. **XML tag wrapping**: User-provided content (bio and additionalInstructions) is now wrapped in XML tags (`\u003cuser_bio\u003e` and `\u003cuser_preferences\u003e`) to clearly delimit user content from system instructions.\n\n2. **Security instruction**: Added explicit instruction in the base system prompt telling the model to treat content within these tags as DATA ONLY, not as commands or instructions.\n\n3. **Tests added**: Added 3 new tests specifically for prompt injection mitigation:\n   - Verifies bio is wrapped in XML tags\n   - Verifies additional instructions are wrapped in XML tags  \n   - Verifies security warning is present in system prompt\n\n4. **Documentation**: Updated AGENTS.md to document the security approach.","created_at":"2026-01-17T14:40:11Z"}]}
{"id":"j-6rp","title":"Phase 3: Navigation","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:14.253911+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.772854+01:00","closed_at":"2026-01-16T21:21:01.747901+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6rp","depends_on_id":"j-3xl","type":"blocks","created_at":"2026-01-16T20:29:53.03178+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6rp.1","title":"Create hooks/useSwipeNavigation.ts","description":"Touch gesture handling for swipe left/right","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:11.857418+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.772351+01:00","closed_at":"2026-01-16T21:05:20.360368+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6rp.1","depends_on_id":"j-6rp","type":"parent-child","created_at":"2026-01-16T20:29:11.858084+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6rp.2","title":"Create components/SwipeContainer.tsx","description":"Wrapper for DayView with swipe support","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:12.705215+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.772103+01:00","closed_at":"2026-01-16T21:07:00.333802+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6rp.2","depends_on_id":"j-6rp","type":"parent-child","created_at":"2026-01-16T20:29:12.707522+01:00","created_by":"Herb Caudill"},{"issue_id":"j-6rp.2","depends_on_id":"j-6rp.1","type":"blocks","created_at":"2026-01-16T20:30:12.139695+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6rp.3","title":"Create components/DatePicker.tsx","description":"Calendar with dots for days with content","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:13.576992+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.771874+01:00","closed_at":"2026-01-16T21:09:09.629471+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6rp.3","depends_on_id":"j-6rp","type":"parent-child","created_at":"2026-01-16T20:29:13.579078+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6rp.4","title":"Add keyboard navigation","description":"Arrow keys (← →) to navigate between days","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:14.385495+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.771631+01:00","closed_at":"2026-01-16T21:11:37.375304+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6rp.4","depends_on_id":"j-6rp","type":"parent-child","created_at":"2026-01-16T20:29:14.387598+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6tq","title":"Text box should have white background","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T00:11:00.702299+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:17:31.112749+01:00","closed_at":"2026-01-17T00:17:31.112749+01:00","close_reason":"Closed"}
{"id":"j-6wk","title":"Use public/icon.png as the application icon","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:36:30.030861+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:53:44.854098+01:00","closed_at":"2026-01-16T23:53:44.854098+01:00","close_reason":"Closed"}
{"id":"j-6zq","title":"Phase 5: Integrations","status":"closed","priority":3,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:16.185179+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.775402+01:00","closed_at":"2026-01-16T22:06:30.1819+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6zq","depends_on_id":"j-3xl","type":"blocks","created_at":"2026-01-16T20:29:54.941436+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6zq.1","title":"Create hooks/useGeolocation.ts","description":"Capture location on entry creation","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:36.437112+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.775153+01:00","closed_at":"2026-01-16T21:28:19.85619+01:00","close_reason":"Implemented useGeolocation hook with tests","dependencies":[{"issue_id":"j-6zq.1","depends_on_id":"j-6zq","type":"parent-child","created_at":"2026-01-16T20:29:36.439454+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6zq.2","title":"Create components/LocationBadge.tsx","description":"Display captured location coordinates","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:37.134157+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.774921+01:00","closed_at":"2026-01-16T21:30:04.828832+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6zq.2","depends_on_id":"j-6zq","type":"parent-child","created_at":"2026-01-16T20:29:37.13709+01:00","created_by":"Herb Caudill"},{"issue_id":"j-6zq.2","depends_on_id":"j-6zq.1","type":"blocks","created_at":"2026-01-16T20:30:13.138066+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6zq.3","title":"Set up Google Cloud project","description":"## Manual Setup Required\n\nThis task requires manual steps in the Google Cloud Console:\n\n### Steps:\n1. Go to [Google Cloud Console](https://console.cloud.google.com/)\n2. Create a new project (e.g., 'journal-app')\n3. Enable the Google Calendar API:\n   - Go to APIs \u0026 Services \u003e Library\n   - Search for 'Google Calendar API'\n   - Click Enable\n4. Configure OAuth consent screen:\n   - Go to APIs \u0026 Services \u003e OAuth consent screen\n   - Select 'External' user type\n   - Fill in app name, user support email, developer email\n   - Add scopes: calendar.readonly, calendar.events.readonly\n   - Add test users (your email)\n5. Create OAuth 2.0 credentials:\n   - Go to APIs \u0026 Services \u003e Credentials\n   - Create Credentials \u003e OAuth client ID\n   - Application type: Web application\n   - Add authorized JavaScript origins: http://localhost:5173\n   - Add authorized redirect URIs: http://localhost:5173\n6. Copy the Client ID for use in the app\n\n### Output:\n- Google Cloud Project ID\n- OAuth 2.0 Client ID\n\nMark this task complete once you have the Client ID ready.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:38.33217+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.77468+01:00","closed_at":"2026-01-16T21:57:37.156072+01:00","close_reason":"Client ID: 93072604399-0arulu0v9b3u7unmfcug79fe2k6tvpnv.apps.googleusercontent.com","dependencies":[{"issue_id":"j-6zq.3","depends_on_id":"j-6zq","type":"parent-child","created_at":"2026-01-16T20:29:38.334607+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6zq.4","title":"Create lib/google-calendar.ts","description":"OAuth flow and Calendar API fetch events","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:39.211828+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.774416+01:00","closed_at":"2026-01-16T22:00:51.002916+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6zq.4","depends_on_id":"j-6zq","type":"parent-child","created_at":"2026-01-16T20:29:39.21247+01:00","created_by":"Herb Caudill"},{"issue_id":"j-6zq.4","depends_on_id":"j-6zq.3","type":"blocks","created_at":"2026-01-16T20:30:13.844806+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6zq.5","title":"Create hooks/useGoogleCalendar.ts","description":"Hook for calendar events fetching","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:40.054842+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.774172+01:00","closed_at":"2026-01-16T22:03:33.47998+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6zq.5","depends_on_id":"j-6zq","type":"parent-child","created_at":"2026-01-16T20:29:40.056802+01:00","created_by":"Herb Caudill"},{"issue_id":"j-6zq.5","depends_on_id":"j-6zq.4","type":"blocks","created_at":"2026-01-16T20:30:14.966138+01:00","created_by":"Herb Caudill"}]}
{"id":"j-6zq.6","title":"Create components/CalendarEvents.tsx","description":"Display calendar events for the day","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:41.426069+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.773933+01:00","closed_at":"2026-01-16T22:05:48.029953+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-6zq.6","depends_on_id":"j-6zq","type":"parent-child","created_at":"2026-01-16T20:29:41.428146+01:00","created_by":"Herb Caudill"},{"issue_id":"j-6zq.6","depends_on_id":"j-6zq.5","type":"blocks","created_at":"2026-01-16T20:30:16.060878+01:00","created_by":"Herb Caudill"}]}
{"id":"j-7ao","title":"Move location to header next to date with icon","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T07:59:35.142559+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:07:47.096759+01:00","closed_at":"2026-01-17T08:07:47.096759+01:00","close_reason":"Closed"}
{"id":"j-7bb","title":"Performance: Missing memoization in useGoogleCalendar return value","description":"**File:** src/hooks/useGoogleCalendar.ts:260-271\n\n**Issue:** The return object from useGoogleCalendar is recreated on every render, causing potential re-renders in components using this hook.\n\n```typescript\nreturn {\n  authState,\n  isLoading,\n  error,\n  events,\n  authenticate,\n  handleCallback,\n  fetchEvents,\n  signOut,\n  clearError,\n}\n```\n\n**Impact:** Components consuming this hook will re-render even when the values haven't changed.\n\n**Fix:** Wrap in `useMemo()`:\n```typescript\nreturn useMemo(() =\u003e ({\n  authState,\n  isLoading,\n  error,\n  events,\n  authenticate,\n  handleCallback,\n  fetchEvents,\n  signOut,\n  clearError,\n}), [authState, isLoading, error, events, authenticate, handleCallback, fetchEvents, signOut, clearError])\n```","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:51.266919+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:51.266919+01:00"}
{"id":"j-7hg","title":"Add submit button that triggers Claude response","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T22:13:27.842231+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.769352+01:00","closed_at":"2026-01-16T22:37:50.8262+01:00","close_reason":"Closed"}
{"id":"j-7pn","title":"Add .env.example for environment variables","description":"No .env.example file exists. Need to document required environment variables: VITE_GOOGLE_CLIENT_ID (per Google Cloud setup instructions in plan).","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:18:07.709034+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:21:26.808646+01:00","closed_at":"2026-01-17T00:21:26.808646+01:00","close_reason":"Closed"}
{"id":"j-7wa","title":"Style input like Claude chat: submit button inside input container (lower right)","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T08:04:15.495121+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:30:54.391891+01:00","closed_at":"2026-01-17T08:30:54.391891+01:00","close_reason":"Closed"}
{"id":"j-8ku","title":"E2E test coverage is minimal","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:22.177232+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:06:23.121044+01:00","closed_at":"2026-01-17T00:06:23.121044+01:00","close_reason":"Closed","comments":[{"id":13,"issue_id":"j-8ku","author":"Herb Caudill","text":"The E2E test suite only has 3 basic navigation tests:\n1. Displays today's date by default\n2. Navigates to settings page\n3. Navigates to specific day\n\nMissing coverage for:\n- Entry editing and persistence\n- Claude AI interaction\n- Date picker navigation\n- Swipe/keyboard navigation\n- Settings save/load\n- Error states\n\n**Location:** e2e/app.spec.ts\n\n**Fix:** Add comprehensive E2E tests for all major user flows.","created_at":"2026-01-16T22:21:57Z"},{"id":17,"issue_id":"j-8ku","author":"Herb Caudill","text":"Broke this issue down into sub-tasks:\n- j-13d: E2E tests: Entry editing and persistence\n- j-q93: E2E tests: Date picker navigation\n- j-a55: E2E tests: Swipe and keyboard navigation\n- j-z8w: E2E tests: Settings save/load\n- j-e8o: E2E tests: Error states\n\nNote: Claude AI interaction tests are not included as they would require mocking the API which adds complexity. This can be added later if needed.","created_at":"2026-01-16T23:05:54Z"}]}
{"id":"j-8lw","title":"Add pseudonyms feature","status":"tombstone","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T00:58:32.384244+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:08:25.804309+01:00","deleted_at":"2026-01-17T01:08:25.804309+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"j-8oj","title":"Settings: add bio and additional instructions fields for system prompt","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T08:13:38.085334+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:12:26.454742+01:00","closed_at":"2026-01-17T09:12:26.454742+01:00","close_reason":"Closed"}
{"id":"j-90w","title":"Refactor Claude integration to support other models in the future","description":"This task has been broken down into sub-issues to refactor the Claude integration into a provider-agnostic LLM abstraction layer.\\n\\nSub-issues (in order):\\n1. j-2a8: Create LLM provider abstraction layer (interface)\\n2. j-p2r: Implement Claude as an LLM provider\\n3. j-bhg: Create useLLM hook to replace useClaude\\n4. j-51x: Update Settings to support LLM provider selection\\n5. j-jph: Rename ClaudeSection to LLMSection\\n6. j-ear: Update and migrate tests for LLM abstraction\\n\\nThis refactoring enables future support for other LLM providers (OpenAI, etc.)","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:39:26.828868+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:12:19.420559+01:00","closed_at":"2026-01-17T01:12:19.420559+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-90w","depends_on_id":"j-2a8","type":"relates-to","created_at":"2026-01-17T00:23:50.696153+01:00","created_by":"Herb Caudill"},{"issue_id":"j-90w","depends_on_id":"j-p2r","type":"relates-to","created_at":"2026-01-17T00:23:50.746899+01:00","created_by":"Herb Caudill"},{"issue_id":"j-90w","depends_on_id":"j-bhg","type":"relates-to","created_at":"2026-01-17T00:23:50.798565+01:00","created_by":"Herb Caudill"},{"issue_id":"j-90w","depends_on_id":"j-51x","type":"relates-to","created_at":"2026-01-17T00:23:50.848427+01:00","created_by":"Herb Caudill"},{"issue_id":"j-90w","depends_on_id":"j-jph","type":"relates-to","created_at":"2026-01-17T00:23:50.89928+01:00","created_by":"Herb Caudill"},{"issue_id":"j-90w","depends_on_id":"j-ear","type":"relates-to","created_at":"2026-01-17T00:23:50.954991+01:00","created_by":"Herb Caudill"}]}
{"id":"j-95b","title":"Location map visualization","status":"tombstone","priority":3,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T01:21:24.511633+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:21:58.208078+01:00","deleted_at":"2026-01-17T01:21:58.208078+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"j-9db","title":"Memory leak: useTheme event listener churn from bad dependencies","description":"**File:** src/hooks/useTheme.ts:72-84\n\n**Issue:** The media query change listener has a dependency array that causes it to be removed and re-added on every render. `resolveTheme` and `applyTheme` are included as dependencies (lines 32-50) but both have empty dependency arrays, causing excessive listener churn.\n\n**Impact:**\n- Performance degradation\n- Brief moments where theme changes aren't detected\n- Excessive event listener create/destroy cycles\n\n**Fix:** Either remove `applyTheme` from dependencies (it's stable) or properly memoize it with `useCallback`:\n```typescript\nuseEffect(() =\u003e {\n  if (preference !== \"system\") return\n  const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\")\n  const handleChange = (e: MediaQueryListEvent) =\u003e {\n    applyTheme(e.matches ? \"dark\" : \"light\")\n  }\n  mediaQuery.addEventListener(\"change\", handleChange)\n  return () =\u003e mediaQuery.removeEventListener(\"change\", handleChange)\n}, [preference]) // Remove applyTheme from dependencies\n```","status":"closed","priority":0,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:51:33.36956+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:36:53.244376+01:00","closed_at":"2026-01-17T15:36:53.244376+01:00","close_reason":"Closed","comments":[{"id":29,"issue_id":"j-9db","author":"Herb Caudill","text":"## Summary of Changes\n\nFixed the memory leak caused by unnecessary event listener churn in `useTheme` hook.\n\n### Changes Made\n\n1. **src/hooks/useTheme.ts**\n   - Removed `resolveTheme` and `applyTheme` from the first `useEffect` dependency array (line 70)\n   - Removed `applyTheme` from the second `useEffect` dependency array (line 84)\n   - Added eslint-disable comments with explanations for why these stable callbacks are intentionally omitted\n\n2. **src/hooks/useTheme.test.tsx**\n   - Added test case \"does not add/remove listeners on re-render when preference unchanged\" to verify no listener churn occurs\n\n### Technical Details\n\nThe `resolveTheme` and `applyTheme` callbacks are memoized with `useCallback` and empty dependency arrays (`[]`), making them stable across renders. Including them in the `useEffect` dependency arrays was unnecessary since they never change. By removing them, we ensure that:\n- The media query event listener is only added once when using system theme\n- The listener is not unnecessarily removed and re-added on every render\n- The theme application effect only runs when the actual preference changes\n\nAll 449 unit tests and 82 E2E tests pass.","created_at":"2026-01-17T14:36:49Z"}]}
{"id":"j-9g6","title":"OAuth callback route not implemented","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:43.376635+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:41:17.092336+01:00","closed_at":"2026-01-16T23:41:17.092336+01:00","close_reason":"Closed","comments":[{"id":3,"issue_id":"j-9g6","author":"Herb Caudill","text":"The useGoogleCalendar hook has a handleCallback function for processing OAuth redirects, but there's no route handling for when Google redirects back to the app after authentication. The redirect URI is configured, but the app doesn't handle the /oauth/callback path.\n\n**Location:** src/hooks/useGoogleCalendar.ts (handleCallback function)\n\n**Fix:** \n1. Add an OAuth callback route in App.tsx to handle /#/oauth/callback\n2. Parse the authorization code and state from the URL\n3. Call handleCallback to complete the authentication flow","created_at":"2026-01-16T22:20:50Z"}]}
{"id":"j-9oh","title":"E2E test failure: conversation-persistence.spec.ts fails to find Settings heading","description":"## Description\n\nThe Playwright E2E test conversation-persistence.spec.ts is failing with the error:\n\n```\nError: expect(locator).toBeVisible() failed\n\nLocator: getByRole('heading', { name: /Settings/ })\nExpected: visible\nTimeout: 5000ms\nError: element(s) not found\n```\n\n## Failing Test\n\nconversation-persistence.spec.ts:4:3 › Conversation persistence › persists conversation after page reload\n\n## Root Cause Analysis Needed\n\nThe test navigates to /#/settings but can't find a heading with name matching /Settings/. This could be due to:\n1. The Settings heading text has changed\n2. The heading element type has changed (not using heading role)\n3. Navigation to settings page is not working correctly\n\n## Steps to Reproduce\n\n1. Run pnpm test:pw --max-failures=1\n2. Observe the failure in conversation-persistence.spec.ts\n\n## Impact\n\nThis is blocking all E2E tests due to --max-failures=1 flag.","status":"open","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T15:29:55.729963+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:29:55.729963+01:00"}
{"id":"j-9om","title":"Code quality: Duplicate spinner code in LLMSection","description":"**File:** src/components/LLMSection.tsx:63-77 and 271-285\n\n**Issue:** Identical spinner SVG code is duplicated in two places within the component.\n\n**Impact:**\n- Code duplication makes maintenance harder\n- If spinner styling needs to change, two places must be updated\n- Violates DRY principle\n\n**Fix:** Extract to a reusable `SpinnerIcon` component:\n```typescript\nconst SpinnerIcon = ({ className }: { className?: string }) =\u003e (\n  \u003csvg className={cn(\"animate-spin\", className)} ...\u003e\n    {/* spinner SVG */}\n  \u003c/svg\u003e\n)\n```","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:47.372428+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:47.372428+01:00"}
{"id":"j-9yb","title":"Add PWA icons and assets","description":"The public/ directory is empty. PWA needs app icons (192x192 and 512x512 PNG), favicon, and apple-touch-icon for proper installability. The manifest in vite.config.ts references no icons.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:18:05.570572+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:11:19.928924+01:00","closed_at":"2026-01-17T00:11:19.928924+01:00","close_reason":"Closed"}
{"id":"j-9z1","title":"In the settings dialog, if there is a google client id, I should see the connect to google button","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:32:59.658086+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:49:08.464772+01:00","closed_at":"2026-01-17T13:49:08.464772+01:00","close_reason":"Closed","comments":[{"id":27,"issue_id":"j-9z1","author":"Herb Caudill","text":"Updated the e2e test `shows unconfigured message when Google client ID is not set` to `shows Connect button when Google client ID is configured`. The previous test had a weak assertion that accepted either the unconfigured message OR the connect button being visible, which didn't properly validate the expected behavior. The new test directly asserts that the Connect Google Account button should be visible when VITE_GOOGLE_CLIENT_ID is configured.","created_at":"2026-01-17T12:49:04Z"}]}
{"id":"j-a55","title":"E2E tests: Swipe and keyboard navigation","description":"Add E2E tests for navigation controls including:\n- Swipe left/right to navigate days\n- Arrow key navigation between days\n- Touch gestures on mobile viewport\n\nPart of j-8ku E2E test coverage improvement.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:05:31.396273+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:55:41.988991+01:00","closed_at":"2026-01-17T01:55:41.988991+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-a55","depends_on_id":"j-8ku","type":"blocks","created_at":"2026-01-17T00:05:31.397054+01:00","created_by":"Herb Caudill"}]}
{"id":"j-a9a","title":"Google integration is marked 'coming soon' but should be available","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T22:11:30.308368+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.770009+01:00","closed_at":"2026-01-16T22:21:01.09461+01:00","close_reason":"Removed 'Coming Soon' badge and enabled Google Calendar integration in Settings. Users can now connect/disconnect their Google account from Settings."}
{"id":"j-aht","title":"Footer: Right-align instead of center","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:49:25.214058+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:26:47.397304+01:00","closed_at":"2026-01-17T09:26:47.397304+01:00","close_reason":"Closed"}
{"id":"j-asx","title":"Config: Missing TypeScript strict checks","description":"**File:** tsconfig.app.json\n\n**Issue:** Missing some valuable strict TypeScript checks that could catch bugs:\n\n- No `exactOptionalPropertyTypes` (could allow undefined where optional is expected)\n- No `forceConsistentCasingInFileNames` (could cause issues on case-insensitive systems)\n- No `noImplicitReturns` (could miss return statements)\n\n**Recommendation:** Add to compilerOptions:\n```json\n{\n  \"compilerOptions\": {\n    \"exactOptionalPropertyTypes\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"noImplicitReturns\": true,\n    \"useUnknownInCatchVariables\": true\n  }\n}\n```\n\nNote: This may require fixing some existing code that doesn't satisfy these stricter checks.","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:54:14.256156+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:54:14.256156+01:00"}
{"id":"j-aw0","title":"Nested JournalProvider causes duplicate context","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:40.490657+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:37:20.172867+01:00","closed_at":"2026-01-16T23:37:20.172867+01:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"j-aw0","author":"Herb Caudill","text":"In App.tsx (line 59), there's a JournalProvider wrapper, but main.tsx (line 9) already wraps the App component with JournalProvider. This causes the journal context to be provided twice, which is unnecessary and could cause subtle bugs.\n\n**Location:** src/App.tsx:59 and src/main.tsx:9\n\n**Fix:** Remove the JournalProvider from App.tsx since main.tsx already provides it.","created_at":"2026-01-16T22:20:46Z"}]}
{"id":"j-awg","title":"Remove 'Conversation' heading","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:08:23.631351+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:42:58.707836+01:00","closed_at":"2026-01-17T08:42:58.707836+01:00","close_reason":"Closed"}
{"id":"j-ay4","title":"Code quality: Hardcoded colors instead of design tokens","description":"**Files:**\n- src/components/Header.tsx:127, 144, 177-178\n- src/components/LocationBadge.tsx:75\n\n**Issue:** Multiple components use hardcoded gray color classes (`hover:bg-gray-100 dark:hover:bg-gray-800`) instead of design token classes like `hover:bg-accent` or `hover:bg-muted`.\n\n**Examples:**\n- Header.tsx line 127: `\"hover:bg-gray-100 dark:hover:bg-gray-800\"`\n- Header.tsx disabled state uses hardcoded grays\n- LocationBadge uses string interpolation instead of `cx()`\n\n**Impact:**\n- Inconsistent styling across components\n- Harder to maintain theme consistency\n- Violates code style guidelines (should use `cx()` for class combining)\n\n**Fix:**\n1. Replace hardcoded colors with design tokens (`bg-accent`, `bg-muted`)\n2. Use `cx()` for class name combining instead of template literals\n3. Use consistent disabled state pattern (`opacity-50` or color tokens)","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:48.504984+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:48.504984+01:00"}
{"id":"j-b8g","title":"Header: Make entire date label clickable to open date picker","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T08:49:07.971241+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:24:34.865685+01:00","closed_at":"2026-01-17T09:24:34.865685+01:00","close_reason":"Closed"}
{"id":"j-bed","title":"E2E tests failing: Date picker tests cannot find expected heading","description":"The e2e tests in date-picker.spec.ts and other e2e tests are failing because they expect a heading that is not being found.\n\n**Error from test run:**\n```\nError: expect(locator).toBeVisible() failed\n\nLocator: getByRole('heading', { name: /March 15, 2025/, level: 1 })\nExpected: visible\nTimeout: 5000ms\nError: element(s) not found\n```\n\n**Tests affected:**\n- e2e/date-picker.spec.ts:29 - closes date picker when clicking outside\n- e2e/date-picker.spec.ts:11 - opens date picker when calendar button is clicked  \n- e2e/date-picker.spec.ts:44 - closes date picker when pressing Escape\n- e2e/app.spec.ts tests\n\n**Details:**\nThe tests navigate to a specific date (/#/day/2025-03-15) and then expect to see an h1 heading with that date in format 'March 15, 2025', but the element is not found. This could be:\n1. A change in the heading format or structure\n2. A change in how dates are displayed\n3. An issue with the page loading or rendering\n4. A timing/wait issue in the tests","status":"open","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T15:28:56.912767+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:28:56.912767+01:00"}
{"id":"j-bhg","title":"Create useLLM hook to replace useClaude","description":"Create src/hooks/useLLM.ts as a provider-agnostic version of useClaude:\\n- Accept provider type and config as parameters\\n- Use the LLMProvider interface internally\\n- Maintain same return type as useClaude for compatibility\\n- Deprecate or remove useClaude hook","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:23:12.813969+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:40:49.879188+01:00","closed_at":"2026-01-17T00:40:49.879188+01:00","close_reason":"Implemented useLLM hook as provider-agnostic replacement for useClaude. The useClaude hook is now a thin deprecated wrapper.","dependencies":[{"issue_id":"j-bhg","depends_on_id":"j-p2r","type":"blocks","created_at":"2026-01-17T00:23:45.350086+01:00","created_by":"Herb Caudill"},{"issue_id":"j-bhg","depends_on_id":"j-90w","type":"relates-to","created_at":"2026-01-17T00:23:50.797839+01:00","created_by":"Herb Caudill"}]}
{"id":"j-btd","title":"Remove timestamps from conversation","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:09:28.58958+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:57:45.661121+01:00","closed_at":"2026-01-17T08:57:45.661121+01:00","close_reason":"Closed"}
{"id":"j-c6q","title":"Apply IBM Plex fonts to the app","description":"IBM Plex fonts (Sans, Serif, Mono) are loaded from Google Fonts in index.html but never applied via CSS. The browser falls back to default fonts. Need to add font-family declarations in src/index.css to actually use them.","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T22:15:15.879352+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.768899+01:00","closed_at":"2026-01-16T22:50:52.260977+01:00","close_reason":"Closed"}
{"id":"j-cfu","title":"Performance: No rate limiting for Google Calendar API calls","description":"**File:** src/lib/google-calendar.ts\n\n**Issue:** No rate limiting for Google Calendar API calls. `fetchAllEventsForDate` makes parallel requests for all calendars that could trigger quota limits.\n\n```typescript\nconst eventPromises = calendars.map(calendar =\u003e fetchEventsForDate(tokens, date, calendar.id))\nconst results = await Promise.all(eventPromises)  // All at once, no backoff\n```\n\n**Impact:** \n- App could hit Google API rate limits\n- Users with many calendars will experience failures\n- No exponential backoff for transient errors\n\n**Fix:** \n1. Implement exponential backoff for failed requests\n2. Add per-API rate limiting\n3. Consider batching or sequential requests for users with many calendars","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:15.829457+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:15.829457+01:00"}
{"id":"j-ci7","title":"Visualizations","status":"tombstone","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-17T01:20:49.452992+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:21:58.208078+01:00","deleted_at":"2026-01-17T01:21:58.208078+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"j-cpt","title":"Test warning: missing act() wrapper in useGoogleCalendar.test.ts","status":"closed","priority":3,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:23.821233+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:27:19.481111+01:00","closed_at":"2026-01-17T00:27:19.481111+01:00","close_reason":"Closed","comments":[{"id":14,"issue_id":"j-cpt","author":"Herb Caudill","text":"Running tests shows a warning about missing act() wrapper in useGoogleCalendar.test.ts. The specific test is 'initializes with authenticated state when authenticated'.\n\n**Location:** src/hooks/useGoogleCalendar.test.ts\n\n**Warning text:**\n'An update to TestComponent inside a test was not wrapped in act(...).'\n\n**Fix:** Wrap the state-updating code in act() to properly flush React updates during testing.","created_at":"2026-01-16T22:21:59Z"}]}
{"id":"j-ct8","title":"Date appears twice on main page","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T22:11:38.904341+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.769779+01:00","closed_at":"2026-01-16T22:31:22.307304+01:00","close_reason":"Already fixed in commit 869faef"}
{"id":"j-cvy","title":"Security: OAuth tokens stored unencrypted in localStorage","description":"**File:** src/lib/google-calendar.ts:251-252\n\n**Issue:** Google OAuth tokens (including refresh tokens) are stored unencrypted in localStorage.\n\n```typescript\nexport function storeTokens(tokens: GoogleTokens): void {\n  localStorage.setItem(TOKEN_STORAGE_KEY, JSON.stringify(tokens))\n}\n```\n\n**Risks:**\n- Refresh tokens are long-lived and provide persistent access\n- XSS could expose all user's Google Calendar data\n- No token encryption or additional security measures\n\n**Suggested Fixes:**\n1. Consider encrypting tokens at rest\n2. Use sessionStorage + in-memory state for more sensitive operations\n3. Add token rotation on app startup\n4. Implement token revocation on logout (currently just clears local storage)","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:51:35.195302+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:42:06.688096+01:00","closed_at":"2026-01-17T15:42:06.688096+01:00","close_reason":"Closed","comments":[{"id":31,"issue_id":"j-cvy","author":"Herb Caudill","text":"**Broken down into sub-issues:**\n\nThis security issue has been decomposed into the following actionable tasks:\n\n1. **j-uyu** (P1) - Implement token encryption for localStorage using Web Crypto API\n2. **j-uca** (P2) - Add proactive token rotation on app startup  \n3. **j-0j1** (P2) - Implement proper token revocation on logout\n\nEach sub-issue contains detailed implementation guidance and acceptance criteria.","created_at":"2026-01-17T14:42:02Z"}]}
{"id":"j-dat","title":"Swiping to change date should work anywhere on screen","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T00:51:17.275116+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:03:44.71862+01:00","closed_at":"2026-01-17T01:03:44.71862+01:00","close_reason":"Closed"}
{"id":"j-db8","title":"No date navigation","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T22:12:02.609928+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.769564+01:00","closed_at":"2026-01-16T22:34:09.538879+01:00","close_reason":"Implemented date navigation via clickable header date picker"}
{"id":"j-dbt","title":"Submit button: smaller, rounded square instead of circle","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:04:35.291144+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:33:20.473733+01:00","closed_at":"2026-01-17T08:33:20.473733+01:00","close_reason":"Closed"}
{"id":"j-dfz","title":"Bug: Incomplete contentEditable check in keyboard navigation","description":"**File:** src/hooks/useKeyboardNavigation.ts:44-50\n\n**Issue:** The check for `contentEditable` is incomplete:\n\n```typescript\nconst isEditableElement =\n  target.tagName === \"INPUT\" ||\n  target.tagName === \"TEXTAREA\" ||\n  target.isContentEditable ||\n  target.contentEditable === \"true\"\n```\n\nThe `contentEditable` attribute can be \"true\", \"false\", or \"inherit\". This check misses elements that inherit contentEditable from parents.\n\n**Impact:** Keyboard navigation may trigger unexpectedly in nested contentEditable elements.\n\n**Fix:**\n```typescript\nconst isEditableElement = (): boolean =\u003e {\n  const target = event.target as HTMLElement\n  if (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\") {\n    return true\n  }\n  \n  // Check contentEditable including inherited state\n  let el: HTMLElement | null = target\n  while (el) {\n    if (el.contentEditable === \"true\") return true\n    if (el.contentEditable === \"false\") break\n    el = el.parentElement\n  }\n  \n  return false\n}\n```","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:53:39.636773+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:53:39.636773+01:00"}
{"id":"j-dlz","title":"Bug: Timezone issues in Google Calendar date parsing","description":"**File:** src/lib/google-calendar.ts:350-351\n\n**Issue:** Creating Date objects with local time (`new Date(\"2024-01-15T00:00:00\")`) assumes user's local timezone. This may not match the timezone the Google Calendar API expects.\n\n```typescript\nconst startOfDay = new Date(\\`\\${date}T00:00:00\\`)  // Local time\nconst endOfDay = new Date(\\`\\${date}T23:59:59\\`)     // Local time\nconst params = new URLSearchParams({\n  timeMin: startOfDay.toISOString(),  // Converts to UTC\n  timeMax: endOfDay.toISOString(),\n})\n```\n\n**Impact:** Events may be missed or included incorrectly for users in certain timezones, particularly around midnight boundaries.\n\n**Fix:** Use UTC explicitly or accept timezone as parameter:\n```typescript\nconst startOfDay = new Date(\\`\\${date}T00:00:00Z\\`)  // Explicit UTC\n// OR\nconst startOfDay = new Date(\\`\\${date}T00:00:00\\${timezoneOffset}\\`)\n```","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:15.977043+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:15.977043+01:00"}
{"id":"j-dyq","title":"Add comprehensive Playwright E2E tests","description":"Only 3 basic Playwright tests exist. Need tests covering:\n- Auto-save: type in entry, refresh page, content persists\n- Swipe navigation: swipe left/right changes date\n- Date picker: shows dots on days with content, selecting navigates\n- Claude: enter API key, submit entry, get response\n- Location: permission prompt, badge shows coordinates  \n- Calendar: OAuth flow, events appear\n- PWA: install prompt works, offline access","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:18:06.602659+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:06:18.646212+01:00","closed_at":"2026-01-17T00:06:18.646212+01:00","close_reason":"Closed","comments":[{"id":18,"issue_id":"j-dyq","author":"Herb Caudill","text":"Closing as duplicate of j-8ku which has been broken down into sub-tasks.","created_at":"2026-01-16T23:06:14Z"}]}
{"id":"j-dzh","title":"Bug: Race condition in geocoding rate limiter","description":"**File:** src/lib/geocoding.ts:143-154, 67\n\n**Issue:** The `lastRequestTime` global variable can be updated before the actual request completes, causing race conditions if multiple concurrent requests are made.\n\n```typescript\nlet lastRequestTime = 0\n\nasync function respectRateLimit(): Promise\u003cvoid\u003e {\n  const now = Date.now()\n  const timeSinceLastRequest = now - lastRequestTime\n  \n  if (timeSinceLastRequest \u003c MIN_REQUEST_INTERVAL_MS) {\n    await new Promise(resolve =\u003e\n      setTimeout(resolve, MIN_REQUEST_INTERVAL_MS - timeSinceLastRequest),\n    )\n  }\n  \n  lastRequestTime = Date.now()  // Updated immediately, before fetch completes\n}\n```\n\n**Impact:** Multiple concurrent requests can bypass rate limiting, potentially causing API bans from Nominatim.\n\n**Fix:** Use a queue-based approach or Promise-based locking mechanism to ensure requests are serialized.","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:14.400731+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:14.400731+01:00"}
{"id":"j-e8o","title":"E2E tests: Error states","description":"Add E2E tests for error handling including:\n- Network error states\n- Invalid input handling\n- Error boundary behavior\n- Recovery from errors\n\nPart of j-8ku E2E test coverage improvement.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:05:40.831105+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T02:13:43.822473+01:00","closed_at":"2026-01-17T02:13:43.822473+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-e8o","depends_on_id":"j-8ku","type":"blocks","created_at":"2026-01-17T00:05:40.831877+01:00","created_by":"Herb Caudill"}]}
{"id":"j-ear","title":"Update and migrate tests for LLM abstraction","description":"Update all tests for the new LLM abstraction:\\n- Create tests for LLMProvider interface\\n- Update claude.test.ts to test Claude provider\\n- Create useLLM.test.ts (migrate from useClaude.test.ts)\\n- Update ClaudeSection.test.tsx to LLMSection.test.tsx\\n- Ensure all tests pass","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:23:30.181748+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:12:12.511135+01:00","closed_at":"2026-01-17T01:12:12.511135+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-ear","depends_on_id":"j-jph","type":"blocks","created_at":"2026-01-17T00:23:45.500442+01:00","created_by":"Herb Caudill"},{"issue_id":"j-ear","depends_on_id":"j-90w","type":"relates-to","created_at":"2026-01-17T00:23:50.954343+01:00","created_by":"Herb Caudill"}]}
{"id":"j-ei4","title":"Google Calendar shows 'not configured' even though client ID is set","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T00:49:31.275252+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:58:57.726744+01:00","closed_at":"2026-01-17T00:58:57.726744+01:00","close_reason":"Closed"}
{"id":"j-eln","title":"dangerouslyAllowBrowser flag used in Claude client","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:24.888392+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:08:35.208752+01:00","closed_at":"2026-01-17T00:08:35.208752+01:00","close_reason":"Added detailed documentation in the code explaining the design decision for using dangerouslyAllowBrowser. The security warning was already present in SettingsView.tsx and documented in AGENTS.md.","comments":[{"id":15,"issue_id":"j-eln","author":"Herb Caudill","text":"The Anthropic client is created with dangerouslyAllowBrowser: true flag, which allows API calls directly from the browser. While this works, it exposes the API key in client-side code.\n\n**Location:** src/lib/claude.ts:37-40\n\n**Current approach:**\nThe app is designed as a local-first PWA where users provide their own API keys, so browser-side API calls are intentional.\n\n**Considerations:**\n1. Document this design decision clearly for users\n2. Consider adding a warning about API key exposure\n3. Future enhancement: offer an optional backend proxy mode for more security","created_at":"2026-01-16T22:22:00Z"}]}
{"id":"j-fty","title":"Commented-out code with undefined variables in SettingsView","description":"**File:** src/components/SettingsView.tsx:574-646\n\n**Issue:** Large block of commented-out OpenAI form code references undefined variables (`saveStatus`, `hasOpenaiUnsavedChanges`, `handleOpenaiSubmit`) that don't exist in the component. These would cause ReferenceError if code is ever uncommented.\n\n**Impact:**\n- Dead code clutters the file\n- If uncommented without implementing missing variables, will crash\n- Confusing for developers\n\n**Fix:** Either:\n1. Implement the missing variables and uncomment the code\n2. Remove the dead code entirely\n3. Convert to a TODO comment explaining what's needed for OpenAI support","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:52.652838+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:52.652838+01:00"}
{"id":"j-gc4","title":"Add save indicator to EntryEditor","status":"closed","priority":3,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:12.51333+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:43:22.191938+01:00","closed_at":"2026-01-17T01:43:22.191938+01:00","close_reason":"Closed","comments":[{"id":12,"issue_id":"j-gc4","author":"Herb Caudill","text":"When typing in the EntryEditor, content is auto-saved with a 500ms debounce, but the user has no visual indication that their content is being saved or has been saved.\n\n**Location:** src/components/EntryEditor.tsx\n\n**Fix:** Add a subtle save indicator:\n- Show 'Saving...' while debounce timer is active\n- Show 'Saved' briefly after save completes\n- Could be a small icon or text near the textarea","created_at":"2026-01-16T22:21:40Z"}]}
{"id":"j-gem","title":"LocationBadge component is never rendered","status":"closed","priority":3,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:54.67175+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:27:44.119312+01:00","closed_at":"2026-01-17T01:27:44.119312+01:00","close_reason":"All sub-tasks completed: LocationBadge is now integrated in DayView with position field in JournalEntry type, location capture button, and auto-capture for today's entries","comments":[{"id":6,"issue_id":"j-gem","author":"Herb Caudill","text":"The LocationBadge component is fully implemented with reverse geocoding support, but it's never imported or rendered in the application. It appears this feature was built but not integrated.\n\n**Location:** src/components/LocationBadge.tsx\n\n**Fix:** Decide where to display location information:\n- In the day view header?\n- Next to the entry timestamp?\n- In a dedicated location capture flow?\n\nThen integrate the LocationBadge component and potentially useGeolocation hook.","created_at":"2026-01-16T22:21:11Z"}]}
{"id":"j-gem.1","title":"Add position field to JournalEntry type","description":"Add an optional 'position' field to the JournalEntry interface to store GeoPosition data for entries.\n\nThe position field should use the existing GeoPosition type from useGeolocation hook.\n\nLocation: src/types/journal.ts\nType: import type { GeoPosition } from '../hooks/useGeolocation'\n\nAdd to JournalEntry:\n  position?: GeoPosition","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T01:13:21.145825+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:14:45.505375+01:00","closed_at":"2026-01-17T01:14:45.505375+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-gem.1","depends_on_id":"j-gem","type":"parent-child","created_at":"2026-01-17T01:13:21.14653+01:00","created_by":"Herb Caudill"}]}
{"id":"j-gem.2","title":"Add location capture button to DayView","description":"Add a location capture button to the DayView component that uses the useGeolocation hook to capture the user's current position.\n\nRequirements:\n- Add a 'Capture location' button near the entry editor\n- Button should show loading state while getting location\n- On success, save the position to the entry\n- Handle permission denied and error states gracefully\n- Only show button if geolocation is supported\n\nDependencies: j-gem.1 (Add position field to JournalEntry type)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T01:13:28.168197+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:18:53.558861+01:00","closed_at":"2026-01-17T01:18:53.558861+01:00","close_reason":"Implemented location capture button in DayView with loading states, error handling, and 8 new unit tests","dependencies":[{"issue_id":"j-gem.2","depends_on_id":"j-gem","type":"parent-child","created_at":"2026-01-17T01:13:28.168852+01:00","created_by":"Herb Caudill"},{"issue_id":"j-gem.2","depends_on_id":"j-gem.1","type":"blocks","created_at":"2026-01-17T01:13:53.054073+01:00","created_by":"Herb Caudill"}]}
{"id":"j-gem.3","title":"Display LocationBadge in DayView when position is captured","description":"Integrate the LocationBadge component in DayView to show the captured location.\n\nRequirements:\n- Import and render LocationBadge when entry has a position\n- Display it near the entry editor (suggested: above or below the CalendarEvents)\n- Make LocationBadge clickable to allow re-capturing location\n- Use reverse geocoding to show locality name\n\nDependencies: j-gem.2 (Add location capture button to DayView)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T01:13:34.51787+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:21:53.21413+01:00","closed_at":"2026-01-17T01:21:53.21413+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-gem.3","depends_on_id":"j-gem","type":"parent-child","created_at":"2026-01-17T01:13:34.51859+01:00","created_by":"Herb Caudill"},{"issue_id":"j-gem.3","depends_on_id":"j-gem.2","type":"blocks","created_at":"2026-01-17T01:13:53.101786+01:00","created_by":"Herb Caudill"}]}
{"id":"j-gsq","title":"Style conversation input same as journal input, but shorter","status":"tombstone","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:11:45.714605+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:03:10.841815+01:00","deleted_at":"2026-01-17T09:03:10.841815+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"j-gyi","title":"Code quality: Save status display pattern duplicated","description":"**File:** src/components/SettingsView.tsx:443-450, 471-478, 536-543\n\n**Issue:** Three identical save status display patterns are repeated in the component.\n\n**Impact:**\n- Code duplication\n- If save status styling changes, three places must be updated\n\n**Fix:** Extract to a reusable component:\n```typescript\nconst SaveStatusIndicator = ({ status }: { status: 'saving' | 'saved' | null }) =\u003e {\n  if (!status) return null\n  return (\n    \u003cspan className=\"text-sm text-muted-foreground\"\u003e\n      {status === 'saving' ? 'Saving...' : 'Saved'}\n    \u003c/span\u003e\n  )\n}\n```","status":"open","priority":4,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:54:19.204711+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:54:19.204711+01:00"}
{"id":"j-hng","title":"Remove 'Clear' button","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:10:03.685112+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:54:13.482988+01:00","closed_at":"2026-01-17T08:54:13.482988+01:00","close_reason":"Duplicate - merged with j-5gt and j-mgd respectively"}
{"id":"j-hnr","title":"Add input validation for date route parameter","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:26.385118+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:45:54.915027+01:00","closed_at":"2026-01-17T01:45:54.915027+01:00","close_reason":"Closed","comments":[{"id":16,"issue_id":"j-hnr","author":"Herb Caudill","text":"The parseHash function in App.tsx accepts date strings from the URL without validation beyond the regex pattern. Invalid dates like '2025-13-45' would match the regex but create invalid Date objects.\n\n**Location:** src/App.tsx:19-22\n\n**Current behavior:**\nThe parseDate function in dates.ts does validate the date after parsing, but App.tsx doesn't catch this error.\n\n**Fix:**\n1. Wrap the route parsing in try-catch\n2. Fall back to today's date if the date is invalid\n3. Consider showing an error message for malformed URLs","created_at":"2026-01-16T22:22:01Z"}]}
{"id":"j-j4c","title":"Don't obfuscate API keys - show in plain text","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:15:01.251949+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:18:23.684169+01:00","closed_at":"2026-01-17T09:18:23.684169+01:00","close_reason":"Closed"}
{"id":"j-jah","title":"Testing: Missing error case tests for API integrations","description":"**Files:** Various test files\n\n**Missing Error Tests By Component:**\n\n| Component | Missing Error Cases |\n|-----------|-------------------|\n| EntryEditor | Failed debounce save, document lock/conflict errors |\n| DayView | Entry load failures, missing data edge cases |\n| CalendarEvents | OAuth token expiration, API quota exceeded, invalid events |\n| LLMSection | Token limit exceeded, API timeouts, malformed responses |\n| SettingsView | localStorage quota exceeded, API validation service down |\n\n**Missing Edge Case Tests:**\n- Empty states (empty conversation, first-time user)\n- Boundary conditions (max message length, year 2000/2038, leap years)\n- Concurrent operations (rapid navigation while fetching)\n- State transitions (API key removal mid-conversation)\n\n**Impact:** Bugs in error handling paths won't be caught by CI.\n\n**Fix:** Add comprehensive error scenario tests for each component.","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:53:38.380973+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:53:38.380973+01:00"}
{"id":"j-jph","title":"Rename ClaudeSection to LLMSection","description":"Refactor ClaudeSection component to be provider-agnostic:\\n- Rename to LLMSection (or AISection)\\n- Update to use useLLM hook instead of useClaude\\n- Update UI text to be provider-agnostic\\n- Update DayView to use the new component name","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:23:23.991321+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:51:54.760191+01:00","closed_at":"2026-01-17T00:51:54.760191+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-jph","depends_on_id":"j-51x","type":"blocks","created_at":"2026-01-17T00:23:45.449558+01:00","created_by":"Herb Caudill"},{"issue_id":"j-jph","depends_on_id":"j-90w","type":"relates-to","created_at":"2026-01-17T00:23:50.898171+01:00","created_by":"Herb Caudill"}]}
{"id":"j-jpo","title":"Add React error boundary for graceful error handling","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:53.953648+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:00:58.537953+01:00","closed_at":"2026-01-17T00:00:58.537953+01:00","close_reason":"Closed","comments":[{"id":5,"issue_id":"j-jpo","author":"Herb Caudill","text":"The app has no React error boundary, so runtime errors will crash the entire application. With a local-first PWA, graceful error handling is especially important since users may not have immediate access to refresh the page or troubleshoot.\n\n**Location:** src/main.tsx or src/App.tsx\n\n**Fix:** Add an ErrorBoundary component that:\n1. Catches JavaScript errors in child component tree\n2. Shows a user-friendly error message\n3. Provides a way to recover (e.g., reload button)\n4. Optionally logs errors for debugging","created_at":"2026-01-16T22:21:10Z"}]}
{"id":"j-jzx","title":"Google OAuth callback fails with 'Failed to complete authentication'","description":"After signing in to Google and approving the app, the callback URL returns 'Failed to complete authentication'. Callback URL includes valid state, code, and scope parameters.","status":"closed","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T09:07:38.307723+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:14:54.448381+01:00","closed_at":"2026-01-17T09:14:54.448381+01:00","close_reason":"Closed"}
{"id":"j-klo","title":"Display location as locality name (e.g. 'Tamariu') instead of coordinates","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T22:19:58.841603+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.768648+01:00","closed_at":"2026-01-16T23:09:55.898726+01:00"}
{"id":"j-klo.1","title":"Create reverse geocoding library to convert coordinates to locality names","description":"Create a new library file src/lib/geocoding.ts that uses OpenStreetMap Nominatim API (free, no API key required) for reverse geocoding. Include caching to avoid redundant API calls.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:52:21.142964+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.766868+01:00","closed_at":"2026-01-16T23:00:22.637944+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-klo.1","depends_on_id":"j-klo","type":"parent-child","created_at":"2026-01-16T22:52:21.145402+01:00","created_by":"Herb Caudill"}]}
{"id":"j-klo.2","title":"Update GeoPosition interface to include optional locality name","description":"Extend the GeoPosition interface in src/hooks/useGeolocation.ts to include an optional 'locality' field that stores the human-readable place name.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:52:25.888137+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.766629+01:00","closed_at":"2026-01-16T23:02:42.466828+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-klo.2","depends_on_id":"j-klo","type":"parent-child","created_at":"2026-01-16T22:52:25.890533+01:00","created_by":"Herb Caudill"}]}
{"id":"j-klo.3","title":"Create useReverseGeocode hook to fetch locality names","description":"Create a new hook src/hooks/useReverseGeocode.ts that takes coordinates and returns a locality name. Should handle loading state, errors, and caching.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:52:31.714225+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.766374+01:00","closed_at":"2026-01-16T23:06:11.018196+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-klo.3","depends_on_id":"j-klo","type":"parent-child","created_at":"2026-01-16T22:52:31.714902+01:00","created_by":"Herb Caudill"},{"issue_id":"j-klo.3","depends_on_id":"j-klo.1","type":"blocks","created_at":"2026-01-16T22:52:52.262762+01:00","created_by":"Herb Caudill"}]}
{"id":"j-klo.4","title":"Update LocationBadge to display locality name instead of coordinates","description":"Modify LocationBadge component to show locality name as primary text, with coordinates available on hover or click. Show loading state while fetching locality.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:52:37.413432+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.766117+01:00","closed_at":"2026-01-16T23:09:31.065425+01:00","dependencies":[{"issue_id":"j-klo.4","depends_on_id":"j-klo","type":"parent-child","created_at":"2026-01-16T22:52:37.415774+01:00","created_by":"Herb Caudill"},{"issue_id":"j-klo.4","depends_on_id":"j-klo.2","type":"blocks","created_at":"2026-01-16T22:52:52.30837+01:00","created_by":"Herb Caudill"},{"issue_id":"j-klo.4","depends_on_id":"j-klo.3","type":"blocks","created_at":"2026-01-16T22:52:52.352974+01:00","created_by":"Herb Caudill"}]}
{"id":"j-klo.5","title":"Add tests for reverse geocoding library and LocationBadge changes","description":"Add unit tests for the geocoding library and update LocationBadge tests to cover locality name display.","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:52:42.401017+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.765865+01:00","closed_at":"2026-01-16T23:09:47.729291+01:00","dependencies":[{"issue_id":"j-klo.5","depends_on_id":"j-klo","type":"parent-child","created_at":"2026-01-16T22:52:42.403307+01:00","created_by":"Herb Caudill"},{"issue_id":"j-klo.5","depends_on_id":"j-klo.4","type":"blocks","created_at":"2026-01-16T22:52:52.396462+01:00","created_by":"Herb Caudill"}]}
{"id":"j-ku2","title":"Config: Missing build optimizations in Vite config","description":"**File:** vite.config.ts\n\n**Issue:** No explicit build optimization settings configured.\n\n**Missing Configurations:**\n- Chunk size warnings\n- Manual chunk splitting for vendors\n- Minification settings\n\n**Recommendation:**\n```typescript\nbuild: {\n  target: 'ES2022',\n  minify: 'terser',\n  rollupOptions: {\n    output: {\n      manualChunks: {\n        vendor: ['react', 'react-dom'],\n        automerge: ['@automerge/automerge', '@automerge/automerge-repo'],\n      }\n    }\n  }\n}\n```\n\nThis would improve initial bundle loading and caching.","status":"open","priority":4,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:54:15.587909+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:54:15.587909+01:00"}
{"id":"j-kv0","title":"the location shouldn't be looked up every time - once it's looked up, it should be stored with that day's journal entry","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T10:01:18.789478+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T11:23:04.565092+01:00","closed_at":"2026-01-17T11:23:04.565092+01:00","close_reason":"Closed"}
{"id":"j-lds","title":"Populate API keys and client keys from .env if present","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T00:51:38.855885+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:09:15.642256+01:00","closed_at":"2026-01-17T01:09:15.642256+01:00","close_reason":"Closed"}
{"id":"j-mgd","title":"Remove clear button","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:53:09.888437+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:42:16.505476+01:00","closed_at":"2026-01-17T09:42:16.505476+01:00","close_reason":"Closed"}
{"id":"j-mhy","title":"Entry length over time chart","status":"tombstone","priority":3,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T01:21:27.811315+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:21:58.208078+01:00","deleted_at":"2026-01-17T01:21:58.208078+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"j-mj0","title":"Type safety: AutomergeArray type casting without verification in DayView","description":"**File:** src/components/DayView.tsx:104\n\n**Issue:** Type-casting `existingEntry.messages` to `AutomergeArray\u003cMessage\u003e` without runtime verification that the object actually implements these methods. This could fail silently at runtime if the structure doesn't match.\n\n```typescript\nconst msgs = existingEntry.messages as AutomergeArray\u003cMessage\u003e\n```\n\nAlso, lines 13-16 define a local `AutomergeArray` interface manually instead of using proper types from `@automerge/automerge` package.\n\n**Impact:** Runtime errors if the actual structure doesn't match the expected interface.\n\n**Fix:** \n1. Add runtime checks or validate that the Automerge methods exist before calling them\n2. Use proper types from `@automerge/automerge` package instead of custom interface\n3. Consider using a type guard","status":"in_progress","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:51:37.197055+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:45:28.68584+01:00"}
{"id":"j-n2n","title":"Center header in same-width container as form","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:01:25.222164+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:19:20.679393+01:00","closed_at":"2026-01-17T08:19:20.679393+01:00","close_reason":"Closed"}
{"id":"j-n9l","title":"Each conversation should belong to one day. Currently it's showing the same conversation for every day.","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T10:58:06.817139+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T11:13:46.962916+01:00","closed_at":"2026-01-17T11:13:46.962916+01:00","close_reason":"Closed"}
{"id":"j-nl4","title":"CalendarEvents component is never used","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:41.709383+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:58:14.911296+01:00","closed_at":"2026-01-16T23:58:14.911296+01:00","close_reason":"Closed","comments":[{"id":2,"issue_id":"j-nl4","author":"Herb Caudill","text":"The CalendarEvents component is fully implemented but is never imported or rendered anywhere in the application. It's meant to display Google Calendar events on the day view, but it's not integrated.\n\n**Location:** src/components/CalendarEvents.tsx\n\n**Fix:** Import and render CalendarEvents in DayView.tsx to display calendar events for each day.","created_at":"2026-01-16T22:20:48Z"}]}
{"id":"j-o0r","title":"Word cloud visualization","status":"tombstone","priority":3,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T01:21:25.514848+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:21:58.208078+01:00","deleted_at":"2026-01-17T01:21:58.208078+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"j-oah","title":"Theme toggle not implemented (dark mode)","status":"closed","priority":3,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:56.210237+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:33:31.728641+01:00","closed_at":"2026-01-17T01:33:31.728641+01:00","close_reason":"Implemented theme toggle with Light/Dark/System options, useTheme hook, and comprehensive tests","comments":[{"id":7,"issue_id":"j-oah","author":"Herb Caudill","text":"The Settings interface includes a theme field with 'light' | 'dark' | 'system' options, but there's no UI to toggle between themes. The dark theme CSS variables are defined in index.css, but there's no mechanism to add the 'dark' class to enable them.\n\n**Location:** src/types/journal.ts (Settings.theme) and src/index.css\n\n**Fix:**\n1. Add theme toggle UI in SettingsView\n2. Apply the 'dark' class to \u003chtml\u003e or \u003cbody\u003e based on user preference\n3. Handle 'system' preference by detecting prefers-color-scheme media query\n4. Persist the choice via the existing settings.theme field","created_at":"2026-01-16T22:21:13Z"}]}
{"id":"j-oes","title":"hotkey: when in an input, command-enter should submit","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T12:41:52.710553+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:20:11.292342+01:00","closed_at":"2026-01-17T13:20:11.292342+01:00","close_reason":"Closed","comments":[{"id":23,"issue_id":"j-oes","author":"Herb Caudill","text":"## Summary of Changes\n\nAdded Cmd/Ctrl+Enter keyboard shortcut to submit when focus is in an input field.\n\n### Changes made:\n\n1. **EntryEditor.tsx**: Added onSubmit prop and keydown handler that triggers submission on Cmd/Ctrl+Enter\n2. **DayView.tsx**: Wires up the onSubmit callback from LLMSection submit button props to EntryEditor\n3. **LLMSection.tsx**: Enhanced follow-up input to also support Cmd/Ctrl+Enter (in addition to existing Enter key)\n\n### Tests added:\n\n- **EntryEditor.test.tsx**: 4 new tests for Cmd+Enter, Ctrl+Enter, plain Enter (no submit), and graceful handling when onSubmit is not provided\n- **LLMSection.test.tsx**: 2 new tests for Cmd+Enter and Ctrl+Enter on follow-up input","created_at":"2026-01-17T12:20:06Z"}]}
{"id":"j-oii","title":"Remove 'ask a follow-up question' placeholder","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:09:44.397583+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:54:13.481079+01:00","closed_at":"2026-01-17T08:54:13.481079+01:00","close_reason":"Duplicate - merged with j-5gt and j-mgd respectively"}
{"id":"j-ojk","title":"Race condition in useClaude hook message state","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T23:20:07.930909+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:04:04.748924+01:00","closed_at":"2026-01-17T00:04:04.748924+01:00","close_reason":"Closed","comments":[{"id":9,"issue_id":"j-ojk","author":"Herb Caudill","text":"In useClaude.ts, the send function captures the messages state in its closure. If send is called rapidly in succession, the second call may not see the messages from the first call because React state updates are asynchronous.\n\n**Location:** src/hooks/useClaude.ts:71-122\n\n**Scenario:**\n1. User sends message A\n2. Message A added optimistically to state\n3. User quickly sends message B (before state settles)\n4. Message B's API call may not include message A in history\n\n**Fix:** Use a ref to track the current messages list, or use the functional form of setState that receives the previous state.","created_at":"2026-01-16T22:21:33Z"}]}
{"id":"j-ouv","title":"use Tabler icons rather than custom icons (e.g. GoogleIcon, WarningIcon, etc)","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T15:28:47.349841+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:28:47.349841+01:00"}
{"id":"j-p2r","title":"Implement Claude as an LLM provider","description":"Refactor src/lib/claude.ts to implement the new LLMProvider interface:\\n- Create src/lib/llm/providers/claude.ts\\n- Implement ClaudeProvider class that implements LLMProvider\\n- Keep existing functionality, just restructure\\n- Export factory function for creating Claude provider","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:23:07.856444+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:35:37.044413+01:00","closed_at":"2026-01-17T00:35:37.044413+01:00","close_reason":"Implemented Claude as an LLM provider","dependencies":[{"issue_id":"j-p2r","depends_on_id":"j-2a8","type":"blocks","created_at":"2026-01-17T00:23:39.345297+01:00","created_by":"Herb Caudill"},{"issue_id":"j-p2r","depends_on_id":"j-90w","type":"relates-to","created_at":"2026-01-17T00:23:50.746252+01:00","created_by":"Herb Caudill"}]}
{"id":"j-p2v","title":"Don't hide the API key - it should be visible","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-16T22:11:19.949937+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.770207+01:00","closed_at":"2026-01-16T22:18:47.646155+01:00","close_reason":"Already fixed - API key input uses type='text' and there's a passing test verifying it's visible"}
{"id":"j-pro","title":"Validation: Missing input validation for coordinates and dates","description":"**Files:**\n- src/lib/geocoding.ts:197-200\n- src/lib/google-calendar.ts:343-347\n\n**Issue 1 (Geocoding):** The `reverseGeocode` function doesn't validate that coordinates are within valid ranges (-90 to 90 for latitude, -180 to 180 for longitude).\n\n**Issue 2 (Calendar):** `fetchEventsForDate` doesn't validate that the date string is in valid YYYY-MM-DD format before using it.\n\n**Impact:** \n- Invalid API calls\n- Wasted API quota\n- Confusing user experience with cryptic errors\n\n**Fix:**\n```typescript\n// Geocoding\nif (latitude \u003c -90 || latitude \u003e 90 || longitude \u003c -180 || longitude \u003e 180) {\n  return { success: false, error: \"Invalid coordinates\" }\n}\n\n// Calendar\nif (!isValidDate(date)) {\n  throw new Error(\\`Invalid date format: \\${date}. Expected YYYY-MM-DD\\`)\n}\n```","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:12.933568+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:12.933568+01:00"}
{"id":"j-q93","title":"E2E tests: Date picker navigation","description":"Add E2E tests for date picker functionality including:\n- Opening and closing date picker\n- Selecting specific dates\n- Month/year navigation\n- Verifying navigation updates the view\n\nPart of j-8ku E2E test coverage improvement.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:05:26.623169+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:52:01.09333+01:00","closed_at":"2026-01-17T01:52:01.09333+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-q93","depends_on_id":"j-8ku","type":"blocks","created_at":"2026-01-17T00:05:26.623998+01:00","created_by":"Herb Caudill"}]}
{"id":"j-qfu","title":"Phase 4: Claude integration","status":"closed","priority":2,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:15.016777+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.772594+01:00","closed_at":"2026-01-16T21:24:41.981145+01:00","close_reason":"All child tasks completed - Claude integration is fully implemented","dependencies":[{"issue_id":"j-qfu","depends_on_id":"j-3xl","type":"blocks","created_at":"2026-01-16T20:29:54.042224+01:00","created_by":"Herb Caudill"}]}
{"id":"j-qfu.1","title":"Install Anthropic SDK","description":"pnpm add @anthropic-ai/sdk","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:22.545832+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.771383+01:00","closed_at":"2026-01-16T21:12:49.058011+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-qfu.1","depends_on_id":"j-qfu","type":"parent-child","created_at":"2026-01-16T20:29:22.548193+01:00","created_by":"Herb Caudill"}]}
{"id":"j-qfu.2","title":"Create lib/claude.ts","description":"Anthropic SDK wrapper with sendMessage function","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:23.917759+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.771142+01:00","closed_at":"2026-01-16T21:15:11.846746+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-qfu.2","depends_on_id":"j-qfu","type":"parent-child","created_at":"2026-01-16T20:29:23.919814+01:00","created_by":"Herb Caudill"},{"issue_id":"j-qfu.2","depends_on_id":"j-qfu.1","type":"blocks","created_at":"2026-01-16T20:30:09.836461+01:00","created_by":"Herb Caudill"}]}
{"id":"j-qfu.3","title":"Create hooks/useClaude.ts","description":"Manage conversation state with Claude","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:24.822531+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.770895+01:00","closed_at":"2026-01-16T21:17:27.628299+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-qfu.3","depends_on_id":"j-qfu","type":"parent-child","created_at":"2026-01-16T20:29:24.823281+01:00","created_by":"Herb Caudill"},{"issue_id":"j-qfu.3","depends_on_id":"j-qfu.2","type":"blocks","created_at":"2026-01-16T20:30:10.556837+01:00","created_by":"Herb Caudill"}]}
{"id":"j-qfu.4","title":"Create components/ClaudeSection.tsx","description":"Submit button and response display","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:25.516049+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.770634+01:00","closed_at":"2026-01-16T21:20:28.399561+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-qfu.4","depends_on_id":"j-qfu","type":"parent-child","created_at":"2026-01-16T20:29:25.516715+01:00","created_by":"Herb Caudill"},{"issue_id":"j-qfu.4","depends_on_id":"j-qfu.3","type":"blocks","created_at":"2026-01-16T20:30:11.232528+01:00","created_by":"Herb Caudill"}]}
{"id":"j-qfu.5","title":"Create components/SettingsView.tsx","description":"API key input and Google auth button","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:29:26.588681+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.770403+01:00","closed_at":"2026-01-16T21:23:43.283635+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-qfu.5","depends_on_id":"j-qfu","type":"parent-child","created_at":"2026-01-16T20:29:26.590814+01:00","created_by":"Herb Caudill"}]}
{"id":"j-r1b","title":"Testing: Hardcoded timing values in tests","description":"**Files:**\n- src/components/EntryEditor.test.tsx:82, 190-191\n- src/components/SettingsView.test.tsx (multiple locations)\n\n**Issue:** Tests use hardcoded magic numbers for timing (600ms debounce, 1500ms indicator) that will break if implementation changes.\n\n```typescript\nvi.advanceTimersByTime(600)  // Assumes 600ms debounce\n```\n\n**Impact:**\n- Flaky tests if timing changes\n- Silent failures when debounce values are adjusted\n- Tests don't document the expected behavior clearly\n\n**Fix:**\n1. Export timing constants from source files\n2. Import constants in tests\n3. Or define test constants that match source:\n```typescript\nconst DEBOUNCE_DELAY = 500\nconst SAVED_INDICATOR_DURATION = 1500\n// In EntryEditor.tsx, export these values\n```","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:53:37.226715+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:53:37.226715+01:00"}
{"id":"j-rx4","title":"Type safety: Record type without constraint for date keys","description":"**File:** src/types/journal.ts:71\n\n**Issue:** `Record\u003cstring, JournalEntry\u003e` uses unbounded string keys, allowing any string as a key:\n\n```typescript\nexport interface JournalDoc {\n  entries: Record\u003cstring, JournalEntry\u003e\n  settings: Settings\n}\n```\n\n**Impact:** No validation that keys match expected date format (YYYY-MM-DD). Invalid dates could be stored without type errors.\n\n**Fix:** Use a branded type:\n```typescript\ntype DateString = string \u0026 { readonly __brand: \"DateString\" }\n\nfunction isDateString(s: string): s is DateString {\n  return /^\\d{4}-\\d{2}-\\d{2}$/.test(s) \u0026\u0026 !isNaN(Date.parse(s))\n}\n\nexport interface JournalDoc {\n  entries: Record\u003cDateString, JournalEntry\u003e\n}\n```","status":"open","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:53:41.062858+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:53:41.062858+01:00"}
{"id":"j-s31","title":"Hardcoded en-US locale in date formatting","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T23:19:57.370497+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:36:35.805843+01:00","closed_at":"2026-01-17T01:36:35.805843+01:00","close_reason":"Closed","comments":[{"id":8,"issue_id":"j-s31","author":"Herb Caudill","text":"Multiple components hardcode 'en-US' for date formatting, ignoring the user's locale preferences. This affects date display in:\n- Header.tsx (formatDisplayDate)\n- DatePicker.tsx (monthName)\n- CalendarEvents.tsx (formatEventTime)\n- ClaudeSection.tsx (formatTime)\n\n**Fix:** Either:\n1. Remove the hardcoded locale to use the browser default\n2. Use the user's timezone setting from Settings to derive locale\n3. Add a locale setting and use it consistently","created_at":"2026-01-16T22:21:14Z"}]}
{"id":"j-s9z","title":"the read-only versions of my messages (including the original post) should all be formatted identically, with no background or padding","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T12:41:15.732809+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:23:13.495245+01:00","closed_at":"2026-01-17T13:23:13.495245+01:00","close_reason":"Closed","comments":[{"id":24,"issue_id":"j-s9z","author":"Herb Caudill","text":"## Changes Made\n\nFixed the styling inconsistency for read-only user messages in the conversation:\n\n### Problem\n- User follow-up messages in the LLM conversation were styled with `bg-primary/10 rounded-md p-4` (background color and padding)\n- The original journal entry (also a user message) was displayed with no background or padding\n- This created visual inconsistency between the original post and follow-up messages\n\n### Solution\n- **src/components/LLMSection.tsx**: Changed user message styling from `bg-primary/10 rounded-md p-4` to an empty className (no background, no padding)\n- User messages now render with just `text-foreground whitespace-pre-wrap` on the inner paragraph, matching the original journal entry display in DayView\n\n### Updated Tests\n- **src/components/LLMSection.test.tsx**: Updated test 'styles assistant messages with muted background and user messages with no background' to verify user messages do NOT have background styling\n\nNow all read-only user messages (original journal entry + follow-up messages) are formatted identically with no background or padding, while assistant messages retain their `bg-muted rounded-md p-4` styling for visual distinction.","created_at":"2026-01-17T12:23:09Z"}]}
{"id":"j-spd","title":"Use Anthropic's color scheme (see brandfetch.com/anthropic.com)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:37:46.63996+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:56:16.601904+01:00","closed_at":"2026-01-16T23:56:16.601904+01:00","close_reason":"Closed"}
{"id":"j-suo","title":"Accessibility: Missing ARIA attributes on interactive elements","description":"**Files:** Multiple components\n\n**Issues Found:**\n\n1. **LocationBadge.tsx:73** - Button doesn't have explicit `type=\"button\"` attribute\n2. **Header.tsx:148** - `CalendarIcon` has `aria-label` but the button should have it instead\n3. **DatePicker.tsx:151** - Popup container has no `role=\"dialog\"` or `role=\"listbox\"`\n4. **CalendarEvents.tsx:108** - Generic aria-label could be more descriptive with date context\n\n**Impact:**\n- Screen reader users may have difficulty understanding interactive elements\n- Keyboard navigation may be incomplete\n- Fails accessibility best practices\n\n**Fix:**\n1. Add `type=\"button\"` to non-form buttons\n2. Move aria-labels from icons to their parent buttons\n3. Add `role=\"dialog\" aria-label=\"Date picker\"` to DatePicker popup\n4. Use dynamic aria-labels that include context (e.g., \"Calendar events for January 15\")","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T13:53:34.557662+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:53:34.557662+01:00"}
{"id":"j-t6d","title":"Memory leak: useGeolocation event listener not cleaned up","description":"**File:** src/hooks/useGeolocation.ts:116-130\n\n**Issue:** The permission change listener added at line 123-125 is never cleaned up. The event listener is added but no cleanup function is returned from the useEffect hook.\n\n```typescript\nresult.addEventListener(\"change\", () =\u003e {\n  setPermission(result.state as GeolocationPermission)\n})\n// Missing cleanup!\n```\n\n**Impact:**\n- Memory leak (listeners accumulate)\n- Multiple state updates on a single permission change\n- Potential stale closures capturing old state values\n\n**Fix:** Add cleanup function:\n```typescript\nconst handleChange = () =\u003e {\n  setPermission(result.state as GeolocationPermission)\n}\nresult.addEventListener(\"change\", handleChange)\nreturn () =\u003e result.removeEventListener(\"change\", handleChange)\n```","status":"closed","priority":0,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:51:32.388204+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:34:03.180953+01:00","closed_at":"2026-01-17T15:34:03.180953+01:00","close_reason":"Closed","comments":[{"id":28,"issue_id":"j-t6d","author":"Herb Caudill","text":"## Changes Made\n\nFixed the memory leak in `useGeolocation` hook by adding proper cleanup for the permissions API event listener.\n\n### Summary of Changes\n\n**src/hooks/useGeolocation.ts:**\n- Extracted the event handler into a named function (`handleChange`)\n- Stored the `PermissionStatus` object in a variable outside the Promise\n- Added a cleanup function that removes the event listener when the component unmounts\n\n**src/hooks/useGeolocation.test.ts:**\n- Added `removeEventListener` mock to all existing test mocks\n- Added a new test case `\"cleans up permission change listener on unmount\"` that verifies the cleanup behavior","created_at":"2026-01-17T14:33:58Z"}]}
{"id":"j-tnh","title":"The first post in the conversation is being shown twice","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T12:07:46.004907+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T12:17:32.70167+01:00","closed_at":"2026-01-17T12:17:32.70167+01:00","close_reason":"Fixed by skipping the first user message in LLMSection display since it's already shown by DayView as the journal entry."}
{"id":"j-ty7","title":"Heading: large day of week, smaller month/day below, year only if not current","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T22:31:51.611822+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:47:52.579177+01:00","closed_at":"2026-01-16T23:47:52.579177+01:00","close_reason":"Closed"}
{"id":"j-u1j","title":"Auto-capture location for current day (remove button)","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T01:16:53.397777+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:26:08.430045+01:00","closed_at":"2026-01-17T01:26:08.430045+01:00","close_reason":"Closed"}
{"id":"j-uca","title":"Security: Add proactive token rotation on app startup","description":"Implement proactive token rotation when the app starts to limit the exposure window of access tokens.\n\n**Context:** Currently tokens are only refreshed when expired. Proactive rotation reduces the window of opportunity if tokens are compromised.\n\n**Implementation:**\n1. Add a rotateTokensIfNeeded() function that refreshes tokens if they're older than a threshold (e.g., 30 minutes)\n2. Call this function on app initialization\n3. Store the token issue timestamp for rotation tracking\n\n**Acceptance Criteria:**\n- Tokens are proactively rotated when the app starts\n- Token age is tracked and used for rotation decisions\n- Unit tests cover rotation logic\n\n**Blocked by:** j-cvy","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T15:41:44.017116+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:41:44.017116+01:00"}
{"id":"j-uyu","title":"Security: Implement token encryption for localStorage","description":"Implement encryption/decryption for OAuth tokens stored in localStorage using the Web Crypto API.\n\n**Context:** OAuth tokens (including refresh tokens) are currently stored as plain JSON in localStorage, which is vulnerable to XSS attacks.\n\n**Implementation:**\n1. Create a crypto utility module with:\n   - generateEncryptionKey() - derives a key from a unique browser identifier\n   - encryptToken(plaintext, key) - AES-GCM encryption\n   - decryptToken(ciphertext, key) - AES-GCM decryption\n2. Update storeTokens() to encrypt before storing\n3. Update getStoredTokens() to decrypt after retrieving\n4. Handle migration of existing unencrypted tokens\n\n**Acceptance Criteria:**\n- Tokens are encrypted at rest using AES-GCM\n- Existing unencrypted tokens are automatically migrated\n- Unit tests cover encryption/decryption and migration scenarios\n\n**Blocked by:** j-cvy","status":"open","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T15:41:36.508076+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:41:36.508076+01:00"}
{"id":"j-vc7","title":"E2E test failure: App displays 'Hello, world' DXOS placeholder instead of journal","description":"## Problem\n\nThe E2E test `navigates to specific day` is failing because when navigating to `/#/day/2025-03-15`, the app displays:\n\n```\nHello, world! This is a DXOS plugin running in the app framework.\n```\n\nInstead of the expected journal page with a heading showing 'March 15, 2025'.\n\n## Error Details\n\nFrom the Playwright test:\n```\nError: expect(locator).toBeVisible() failed\n\nLocator: getByRole('heading', { name: /March 15, 2025/, level: 1 })\nExpected: visible\nTimeout: 5000ms\nError: element(s) not found\n```\n\nThe error context snapshot shows the page structure:\n```yaml\n- generic [ref=e4]:\n  - heading 'Hello, world!' [level=1] [ref=e5]\n  - paragraph [ref=e6]: This is a DXOS plugin running in the app framework.\n```\n\n## Investigation Needed\n\n1. Determine why the DXOS placeholder is showing instead of the journal app\n2. Check if this is a build issue, routing issue, or configuration problem\n3. Fix the issue so the E2E tests pass\n\n## Test Command to Reproduce\n\n```bash\npnpm test:pw --max-failures=1\n```","status":"open","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T15:28:03.095847+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T15:28:03.095847+01:00"}
{"id":"j-vhe","title":"Allow continued chat with Claude after submission","description":"Currently, users can only submit their journal entry once to Claude. This feature enables a continued chat experience where users can ask follow-up questions and have a back-and-forth conversation with Claude about their journal entry.\n\n## Sub-tasks\n- journal-vhe.1: Add follow-up message input in ClaudeSection\n- journal-vhe.2: Display user messages in Claude conversation  \n- journal-vhe.3: Add tests for continued Claude chat functionality","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-16T22:13:44.473806+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.769108+01:00","closed_at":"2026-01-16T22:48:09.672382+01:00","close_reason":"All sub-tasks completed: follow-up message input in ClaudeSection, user message display, and comprehensive tests are all in place"}
{"id":"j-vhe.1","title":"Add follow-up message input in ClaudeSection","description":"After the initial journal entry is submitted to Claude, display a text input field to allow the user to send follow-up messages. The input should:\n- Appear below the conversation history\n- Have a send button\n- Be disabled while waiting for Claude's response\n- Clear after sending","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:39:32.604857+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.7676+01:00","closed_at":"2026-01-16T22:43:17.960099+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-vhe.1","depends_on_id":"j-vhe","type":"parent-child","created_at":"2026-01-16T22:39:32.6073+01:00","created_by":"Herb Caudill"}]}
{"id":"j-vhe.2","title":"Display user messages in Claude conversation","description":"Update ClaudeSection to display both user and assistant messages in the conversation, styled differently:\n- User messages should be right-aligned or have a different background color\n- Assistant messages remain styled as currently\n- Each message should show the timestamp\n- Messages should be displayed in chronological order","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:39:37.502374+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.767371+01:00","closed_at":"2026-01-16T22:46:23.063244+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-vhe.2","depends_on_id":"j-vhe","type":"parent-child","created_at":"2026-01-16T22:39:37.504919+01:00","created_by":"Herb Caudill"}]}
{"id":"j-vhe.3","title":"Add tests for continued Claude chat functionality","description":"Add unit tests to verify:\n- Follow-up input appears after initial submission\n- Follow-up messages are sent correctly\n- Both user and assistant messages are displayed\n- Input is disabled while loading\n- Conversation persists via onMessagesChange callback","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T22:39:42.112821+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.767123+01:00","closed_at":"2026-01-16T22:48:01.646536+01:00","close_reason":"Tests for continued Claude chat functionality already exist in ClaudeSection.test.tsx and useClaude.test.ts, covering all requirements: follow-up input visibility, message sending, user/assistant message display, loading state, and onMessagesChange callback persistence","dependencies":[{"issue_id":"j-vhe.3","depends_on_id":"j-vhe","type":"parent-child","created_at":"2026-01-16T22:39:42.115252+01:00","created_by":"Herb Caudill"}]}
{"id":"j-wb8","title":"Bug: Claude provider doesn't handle non-text responses","description":"**File:** src/lib/llm/providers/claude.ts:110-111\n\n**Issue:** Code assumes a text response block exists. Non-text content (images, tool calls) would silently be ignored.\n\n```typescript\nconst textContent = response.content.find(block =\u003e block.type === \"text\")\nconst content = textContent?.type === \"text\" ? textContent.text : \"\"\n```\n\n**Impact:** Empty responses if Claude returns images or tool calls instead of text, with no indication to the user about what happened.\n\n**Fix:** Return an error if no text content is found:\n```typescript\nconst textContent = response.content.find(block =\u003e block.type === \"text\")\nif (\\!textContent || textContent.type \\!== \"text\") {\n  return {\n    content: \"\",\n    success: false,\n    error: \"Response contained no text content\",\n  }\n}\n```","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:54:16.907245+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:54:16.907245+01:00"}
{"id":"j-wbh","title":"Only show API key field for selected LLM provider","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T00:49:09.003693+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T00:54:21.217934+01:00","closed_at":"2026-01-17T00:54:21.217934+01:00","close_reason":"Fixed: Only show API key field for selected LLM provider"}
{"id":"j-wi2","title":"Show more specific locality name (Tamariu not Palafrugell)","status":"closed","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T08:00:41.542334+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T08:10:53.989638+01:00","closed_at":"2026-01-17T08:10:53.989638+01:00","close_reason":"Closed"}
{"id":"j-x8g","title":"Calendar heatmap visualization","status":"tombstone","priority":3,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T01:21:23.235018+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:21:58.208078+01:00","deleted_at":"2026-01-17T01:21:58.208078+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"j-xl2","title":"Add a hotkey: Typing `T` (when not in a text input) should go to today","status":"closed","priority":2,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T10:59:35.393631+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T11:18:45.6631+01:00","closed_at":"2026-01-17T11:18:45.6631+01:00","close_reason":"Closed"}
{"id":"j-y71","title":"Bug: Confusing message array handling logic in DayView","description":"**File:** src/components/DayView.tsx:101-109\n\n**Issue:** The `handleMessagesChange` function has confusing logic about managing the message array:\n\n```typescript\nconst firstUserMessageIndex = existingEntry.messages.findIndex(m =\u003e m.role === \"user\")\nwhile (msgs.length \u003e (firstUserMessageIndex \u003e= 0 ? 1 : 0)) {\n  msgs.deleteAt(firstUserMessageIndex \u003e= 0 ? 1 : 0)\n}\n```\n\nIf `firstUserMessageIndex === -1`, it tries to delete from index 0. The logic is hard to follow and may have edge cases.\n\n**Impact:**\n- Potential data corruption if edge cases occur\n- Code is difficult to understand and maintain\n- May cause bugs when modifying conversation state\n\n**Fix:** Rewrite with explicit comments explaining the state management strategy:\n```typescript\n// Clear all messages except the first user message (if exists)\n// Then replace with the new message array\n// Rationale: [explain why this approach is needed]\n```","status":"open","priority":2,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-17T13:52:50.072125+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T13:52:50.072125+01:00"}
{"id":"j-yi6","title":"Writing streak visualization","status":"tombstone","priority":3,"issue_type":"feature","owner":"herb@devresults.com","created_at":"2026-01-17T01:21:26.896686+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T01:21:58.208078+01:00","deleted_at":"2026-01-17T01:21:58.208078+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"j-yjq","title":"Remove eslint from project","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T08:59:59.657429+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T09:46:32.192246+01:00","closed_at":"2026-01-17T09:46:32.192246+01:00","close_reason":"Closed"}
{"id":"j-yla","title":"the edit button should be just an icon, very small and muted, should appear below the message, and only on hover (or on tap on mobile)","status":"closed","priority":2,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T11:10:26.839709+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T12:05:28.225888+01:00","closed_at":"2026-01-17T12:05:28.225888+01:00","close_reason":"Closed"}
{"id":"j-z8w","title":"E2E tests: Settings save/load","description":"Add E2E tests for settings functionality including:\n- Saving API keys\n- Loading persisted settings\n- Clearing settings\n- Settings validation\n\nPart of j-8ku E2E test coverage improvement.","status":"closed","priority":3,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-17T00:05:36.192399+01:00","created_by":"Herb Caudill","updated_at":"2026-01-17T02:07:41.982982+01:00","closed_at":"2026-01-17T02:07:41.982982+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-z8w","depends_on_id":"j-8ku","type":"blocks","created_at":"2026-01-17T00:05:36.193224+01:00","created_by":"Herb Caudill"}]}
{"id":"j-zw7","title":"Phase 1: Data layer","status":"closed","priority":1,"issue_type":"epic","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:12.782045+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.765613+01:00","closed_at":"2026-01-16T20:52:10.360229+01:00","close_reason":"Closed"}
{"id":"j-zw7.1","title":"Install Automerge dependencies","description":"pnpm add @automerge/automerge @automerge/automerge-repo @automerge/automerge-repo-storage-indexeddb @automerge/automerge-repo-react-hooks","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:43.795771+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.765068+01:00","closed_at":"2026-01-16T20:43:51.654065+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-zw7.1","depends_on_id":"j-zw7","type":"parent-child","created_at":"2026-01-16T20:28:43.799606+01:00","created_by":"Herb Caudill"}]}
{"id":"j-zw7.2","title":"Create types/journal.ts","description":"TypeScript interfaces for JournalDoc, JournalEntry, Message, Settings","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:45.036388+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.764809+01:00","closed_at":"2026-01-16T20:45:24.961689+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-zw7.2","depends_on_id":"j-zw7","type":"parent-child","created_at":"2026-01-16T20:28:45.038316+01:00","created_by":"Herb Caudill"},{"issue_id":"j-zw7.2","depends_on_id":"j-zw7.1","type":"blocks","created_at":"2026-01-16T20:30:06.234666+01:00","created_by":"Herb Caudill"}]}
{"id":"j-zw7.3","title":"Create lib/repo.ts","description":"Initialize Automerge repo with IndexedDB storage","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:45.793647+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.76455+01:00","closed_at":"2026-01-16T20:46:57.33625+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-zw7.3","depends_on_id":"j-zw7","type":"parent-child","created_at":"2026-01-16T20:28:45.796089+01:00","created_by":"Herb Caudill"},{"issue_id":"j-zw7.3","depends_on_id":"j-zw7.2","type":"blocks","created_at":"2026-01-16T20:30:08.177564+01:00","created_by":"Herb Caudill"}]}
{"id":"j-zw7.4","title":"Create context/JournalContext.tsx","description":"Wrap app, provide Automerge document access","status":"closed","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-16T20:28:47.449062+01:00","created_by":"Herb Caudill","updated_at":"2026-01-16T23:10:19.764289+01:00","closed_at":"2026-01-16T20:51:33.721622+01:00","close_reason":"Closed","dependencies":[{"issue_id":"j-zw7.4","depends_on_id":"j-zw7","type":"parent-child","created_at":"2026-01-16T20:28:47.451103+01:00","created_by":"Herb Caudill"},{"issue_id":"j-zw7.4","depends_on_id":"j-zw7.3","type":"blocks","created_at":"2026-01-16T20:30:09.140398+01:00","created_by":"Herb Caudill"}]}
